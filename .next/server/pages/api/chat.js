"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/chat";
exports.ids = ["pages/api/chat"];
exports.modules = {

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "@google/generative-ai":
/*!****************************************!*\
  !*** external "@google/generative-ai" ***!
  \****************************************/
/***/ ((module) => {

module.exports = import("@google/generative-ai");;

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fchat&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fapi%2Fchat.ts&middlewareConfigBase64=e30%3D!":
/*!********************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fchat&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fapi%2Fchat.ts&middlewareConfigBase64=e30%3D! ***!
  \********************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _src_pages_api_chat_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/pages/api/chat.ts */ \"(api)/./src/pages/api/chat.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_src_pages_api_chat_ts__WEBPACK_IMPORTED_MODULE_3__]);\n_src_pages_api_chat_ts__WEBPACK_IMPORTED_MODULE_3__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_src_pages_api_chat_ts__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_src_pages_api_chat_ts__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/chat\",\n        pathname: \"/api/chat\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _src_pages_api_chat_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRmNoYXQmcHJlZmVycmVkUmVnaW9uPSZhYnNvbHV0ZVBhZ2VQYXRoPS4lMkZzcmMlMkZwYWdlcyUyRmFwaSUyRmNoYXQudHMmbWlkZGxld2FyZUNvbmZpZ0Jhc2U2ND1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ0w7QUFDMUQ7QUFDb0Q7QUFDcEQ7QUFDQSxpRUFBZSx3RUFBSyxDQUFDLG1EQUFRLFlBQVksRUFBQztBQUMxQztBQUNPLGVBQWUsd0VBQUssQ0FBQyxtREFBUTtBQUNwQztBQUNPLHdCQUF3QixnSEFBbUI7QUFDbEQ7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsWUFBWTtBQUNaLENBQUM7O0FBRUQscUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ydW4tcGxhbm5lci8/YWYxNiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQYWdlc0FQSVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvcGFnZXMtYXBpL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IGhvaXN0IH0gZnJvbSBcIm5leHQvZGlzdC9idWlsZC90ZW1wbGF0ZXMvaGVscGVyc1wiO1xuLy8gSW1wb3J0IHRoZSB1c2VybGFuZCBjb2RlLlxuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi4vc3JjL3BhZ2VzL2FwaS9jaGF0LnRzXCI7XG4vLyBSZS1leHBvcnQgdGhlIGhhbmRsZXIgKHNob3VsZCBiZSB0aGUgZGVmYXVsdCBleHBvcnQpLlxuZXhwb3J0IGRlZmF1bHQgaG9pc3QodXNlcmxhbmQsIFwiZGVmYXVsdFwiKTtcbi8vIFJlLWV4cG9ydCBjb25maWcuXG5leHBvcnQgY29uc3QgY29uZmlnID0gaG9pc3QodXNlcmxhbmQsIFwiY29uZmlnXCIpO1xuLy8gQ3JlYXRlIGFuZCBleHBvcnQgdGhlIHJvdXRlIG1vZHVsZSB0aGF0IHdpbGwgYmUgY29uc3VtZWQuXG5leHBvcnQgY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgUGFnZXNBUElSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuUEFHRVNfQVBJLFxuICAgICAgICBwYWdlOiBcIi9hcGkvY2hhdFwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL2NoYXRcIixcbiAgICAgICAgLy8gVGhlIGZvbGxvd2luZyBhcmVuJ3QgdXNlZCBpbiBwcm9kdWN0aW9uLlxuICAgICAgICBidW5kbGVQYXRoOiBcIlwiLFxuICAgICAgICBmaWxlbmFtZTogXCJcIlxuICAgIH0sXG4gICAgdXNlcmxhbmRcbn0pO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1wYWdlcy1hcGkuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fchat&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fapi%2Fchat.ts&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./src/lib/aiClient.ts":
/*!*****************************!*\
  !*** ./src/lib/aiClient.ts ***!
  \*****************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   generateRunningPlan: () => (/* binding */ generateRunningPlan),\n/* harmony export */   getAiClient: () => (/* binding */ getAiClient)\n/* harmony export */ });\n/* harmony import */ var _google_generative_ai__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @google/generative-ai */ \"@google/generative-ai\");\n/* harmony import */ var _prompts__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./prompts */ \"(api)/./src/lib/prompts.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_google_generative_ai__WEBPACK_IMPORTED_MODULE_0__]);\n_google_generative_ai__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n// Initialize the Generative AI client\nconst getAiClient = (apiKey)=>{\n    // Use provided API key or look for environment variable\n    const key = apiKey || process.env.GEMINI_API_KEY;\n    if (!key) {\n        throw new Error(\"Google AI API key is required. Please provide it or set GEMINI_API_KEY environment variable.\");\n    }\n    return new _google_generative_ai__WEBPACK_IMPORTED_MODULE_0__.GoogleGenerativeAI(key);\n};\n// Create a running plan using Google AI API\nconst generateRunningPlan = async (conversationHistory, apiKey)=>{\n    try {\n        const genAI = getAiClient(apiKey);\n        // 최신 Google AI 모델 사용\n        const model = genAI.getGenerativeModel({\n            model: \"gemini-2.0-flash\",\n            generationConfig: {\n                temperature: 0.7,\n                maxOutputTokens: 1000\n            }\n        });\n        // 외부 파일에서 시스템 프롬프트 가져오기\n        const systemPrompt = _prompts__WEBPACK_IMPORTED_MODULE_1__.runningCoachPrompt;\n        // 대화 컨텍스트 구성\n        let chatContext = \"\";\n        // 최대 8개의 최근 대화 포함 (이전보다 더 많은 맥락 유지)\n        const recentMessages = conversationHistory.slice(-8);\n        if (recentMessages.length > 1) {\n            chatContext = \"이전 대화 내용:\\n\\n\";\n            recentMessages.forEach((msg)=>{\n                const role = msg.role === \"user\" ? \"사용자\" : \"코치\";\n                chatContext += `${role}: ${msg.text}\\n\\n`;\n            });\n        }\n        // 대화 맥락에서 수집된 정보 추출\n        const userInfo = extractUserInfoFromContext(conversationHistory);\n        if (Object.keys(userInfo).length > 0) {\n            chatContext += \"\\n사용자 정보:\\n\";\n            Object.entries(userInfo).forEach(([key, value])=>{\n                chatContext += `${key}: ${value}\\n`;\n            });\n            chatContext += \"\\n\";\n        }\n        // 사용자의 최신 메시지 가져오기\n        const lastUserMessage = getLastUserMessage(conversationHistory);\n        // 전체 프롬프트 구성\n        const fullPrompt = `${systemPrompt}\n    \n${chatContext}\n\n사용자의 메시지: ${lastUserMessage}`;\n        console.log(\"Calling Google AI API with prompt...\");\n        try {\n            // 최신 API 방식으로 직접 콘텐츠 생성 요청\n            const result = await model.generateContent(fullPrompt);\n            const response = result.response;\n            const text = response.text();\n            console.log(\"API response received successfully\");\n            // JSON 데이터 추출 시도\n            let planData = null;\n            try {\n                const jsonMatch = text.match(/```json\\s*({[\\s\\S]*?})\\s*```/);\n                if (jsonMatch && jsonMatch[1]) {\n                    planData = JSON.parse(jsonMatch[1]);\n                }\n            } catch (error) {\n                console.error(\"Failed to parse JSON plan data:\", error);\n            }\n            return {\n                text,\n                planData\n            };\n        } catch (error) {\n            console.error(\"Error with Google AI API:\", error);\n            console.error(\"Error details:\", JSON.stringify(error, null, 2));\n            // API 호출 실패 시 모의 응답 사용\n            const mockText = mockChatResponse(lastUserMessage, conversationHistory);\n            const mockPlanData = createMockPlanData(lastUserMessage, conversationHistory);\n            return {\n                text: mockText,\n                planData: mockPlanData\n            };\n        }\n    } catch (error) {\n        console.error(\"Error in generateRunningPlan:\", error);\n        // 항상 최소한의 응답 제공\n        const mockText = mockChatResponse(\"러닝 계획\", conversationHistory);\n        return {\n            text: mockText,\n            planData: createMockPlanData(\"러닝 계획\", conversationHistory)\n        };\n    }\n};\n// 사용자의 마지막 메시지 가져오기\nfunction getLastUserMessage(history) {\n    for(let i = history.length - 1; i >= 0; i--){\n        if (history[i].role === \"user\") {\n            return history[i].text;\n        }\n    }\n    return \"러닝 계획에 대해 알려주세요\"; // 기본 메시지\n}\n// 모의 응답 생성 함수 (API 호출 실패 시 사용)\nfunction mockChatResponse(message, history) {\n    // 대화 히스토리가 있으면 사용자 정보 추출\n    const userInfo = history ? extractUserInfoFromContext(history) : {};\n    // 수집된 정보에 따른 맞춤형 응답\n    const hasExperience = \"경험 수준\" in userInfo;\n    const hasDistance = \"목표 거리\" in userInfo;\n    const hasDate = \"날짜 시간\" in userInfo;\n    const hasIntensity = \"강도\" in userInfo;\n    const hasTime = \"목표 시간\" in userInfo || \"목표 페이스\" in userInfo;\n    const hasFrequency = \"주간 빈도\" in userInfo;\n    const hasGoal = \"목표\" in userInfo;\n    const wantsNewPlan = \"새 계획 요청\" in userInfo;\n    // 새 계획 요청 처리\n    if (wantsNewPlan) {\n        const newPlanResponses = [\n            \"새로운 러닝 계획을 원하시는군요! \\uD83D\\uDE0A 어떤 거리와 난이도로 새롭게 만들어드릴까요?\",\n            \"기존 계획을 변경해드릴게요! 어떤 거리로 달리고 싶으신가요? 그리고 언제 달리실 계획인지도 알려주세요~\",\n            \"새 러닝 플랜을 만들어 드릴게요! 목표 거리와 달리고 싶은 날짜를 알려주시면 바로 준비해드릴게요 \\uD83D\\uDC4D\"\n        ];\n        return randomSelect(newPlanResponses);\n    }\n    // 정보가 충분하면 플랜 제공\n    if (hasExperience && hasDistance && hasDate && hasIntensity && hasTime) {\n        const experience = userInfo[\"경험 수준\"] || \"초보자\";\n        const distance = userInfo[\"목표 거리\"] || \"5km\";\n        const date = userInfo[\"날짜 시간\"] || \"내일 아침\";\n        const time = userInfo[\"목표 시간\"] || userInfo[\"목표 페이스\"] || \"\";\n        const intensity = userInfo[\"강도\"] || \"중간\";\n        const emojiOptions = [\n            \"\\uD83D\\uDE0A\",\n            \"\\uD83D\\uDC4D\",\n            \"\\uD83C\\uDFC3‍♀️\",\n            \"\\uD83C\\uDFC3\",\n            \"\\uD83D\\uDCAA\",\n            \"✨\",\n            \"\\uD83C\\uDF1F\"\n        ];\n        const emoji = emojiOptions[Math.floor(Math.random() * emojiOptions.length)];\n        const planResponses = [\n            `${date}에 ${distance} 달리기 플랜이 준비됐어요! ${emoji} ${time ? time + \" 목표로 \" : \"\"}${intensity} 강도로 시작해보세요. 아래 위젯에서 세부 계획을 확인하실 수 있어요~`,\n            `${experience} 수준에 맞는 ${distance} 플랜을 만들었어요! ${emoji} ${date}에 ${intensity} 강도로 진행하시면 좋을 것 같아요. 세부 계획은 아래 카드에서 확인하세요!`,\n            `${date} ${distance} 러닝 계획이 완성됐어요! ${emoji} ${time}${intensity} 강도로 달리는 맞춤 플랜이니 참고하세요. 즐거운 러닝 되세요~`\n        ];\n        return randomSelect(planResponses);\n    }\n    // 정보 수집 단계 - 친근한 말투로 변경\n    if (!hasDistance) {\n        const distanceResponses = [\n            \"안녕하세요! 뉴런 러닝 코치예요~ \\uD83D\\uDE0A 어떤 거리를 목표로 하고 계신가요? 5km, 10km 등 알려주시면 맞춤 플랜을 만들어 드릴게요!\",\n            \"반가워요! 러닝 플랜을 위해 목표 거리부터 알려주세요~ 5km, 10km 등 달리고 싶은 거리가 있으신가요? \\uD83C\\uDFC3‍♀️\",\n            \"안녕하세요! 뉴런 러닝 코치입니다~ 어떤 거리로 러닝 계획을 세워드릴까요? 목표 거리를 알려주세요! \\uD83D\\uDE0A\"\n        ];\n        return randomSelect(distanceResponses);\n    }\n    if (hasDistance && !hasExperience) {\n        return `${userInfo[\"목표 거리\"]} 러닝 플랜이군요! 👍 혹시 달리기 경험은 어느 정도인가요? 초보자, 중급자, 고급자 중에 골라주시면 맞춤 플랜을 만들어 드릴게요~`;\n    }\n    if (hasDistance && hasExperience && !hasDate) {\n        return `${userInfo[\"경험 수준\"]}를 위한 ${userInfo[\"목표 거리\"]} 플랜이군요! 😊 언제 달리실 계획인가요? 내일, 주말 등 알려주시면 더 구체적인 계획을 세워드릴게요~`;\n    }\n    if (hasDistance && hasExperience && hasDate && !hasIntensity) {\n        return `${userInfo[\"날짜 시간\"]}에 ${userInfo[\"목표 거리\"]} 달리실 계획이군요! 어느 정도 강도로 달리고 싶으신가요? 가벼움, 중간, 높음 중에 알려주세요~ 💪`;\n    }\n    if (hasDistance && hasExperience && hasDate && hasIntensity && !hasTime) {\n        return `거의 다 왔어요! 👍 ${userInfo[\"목표 거리\"]}를 완주하는데 목표 시간이나, 페이스가 있으신가요? 예를 들어 \"30분 안에\" 또는 \"킬로당 6분\" 같은 목표요!`;\n    }\n    // 인사 응답\n    if (message.toLowerCase().includes(\"안녕\") || message.toLowerCase().includes(\"hi\") || message.toLowerCase().includes(\"hello\")) {\n        const greetings = [\n            \"안녕하세요! 뉴런 러닝 코치예요~ \\uD83D\\uDE0A 오늘은 어떤 달리기 계획을 도와드릴까요?\",\n            \"반가워요! 뉴런 러닝 코치입니다. 어떤 달리기 목표를 갖고 계신가요? 도와드릴게요! \\uD83D\\uDC4B\",\n            \"안녕하세요! 달리기 계획을 함께 세워볼까요? 어떤 거리를 목표로 하고 계신지 알려주세요~ \\uD83C\\uDFC3‍♀️\"\n        ];\n        return randomSelect(greetings);\n    }\n    // 기본 응답\n    const defaultResponses = [\n        \"뉴런 러닝 코치예요~ \\uD83D\\uDCAA 맞춤 러닝 플랜을 위해 목표 거리와 달리기 경험을 알려주세요!\",\n        \"즐거운 러닝을 위한 맞춤 플랜을 만들어 드릴게요! \\uD83D\\uDE0A 목표 거리, 경험 수준, 그리고 언제 달리실 건지 알려주세요~\",\n        \"안녕하세요! 뉴런과 함께 달려볼까요? \\uD83C\\uDFC3‍♀️ 어떤 거리를 목표로 하시는지, 그리고 달리기 경험은 어느 정도인지 알려주세요!\"\n    ];\n    return randomSelect(defaultResponses);\n}\n// 모의 플랜 데이터 생성 함수\nfunction createMockPlanData(message, history) {\n    // 사용자 정보 추출\n    const userInfo = history ? extractUserInfoFromContext(history) : {};\n    // 기본값 설정\n    const experience = userInfo[\"경험 수준\"] || \"초보자\";\n    const targetDistance = userInfo[\"목표 거리\"] || \"5km\";\n    const frequency = userInfo[\"주간 빈도\"] || \"주 3회\";\n    const goal = userInfo[\"목표\"] || \"\";\n    const now = new Date();\n    // 랜덤 미래 날짜 생성 (1~7일 이내)\n    const futureDate = new Date();\n    futureDate.setDate(now.getDate() + Math.floor(Math.random() * 7) + 1);\n    // 오전 6시 ~ 오전 9시 사이 랜덤 시간\n    const hour = 6 + Math.floor(Math.random() * 4);\n    const minute = Math.floor(Math.random() * 6) * 10; // 0, 10, 20, 30, 40, 50\n    const formattedDate = `${futureDate.getFullYear()}년 ${futureDate.getMonth() + 1}월 ${futureDate.getDate()}일 (${getKoreanDayOfWeek(futureDate)}) 오전 ${hour}:${minute < 10 ? \"0\" + minute : minute}`;\n    // 추출된 거리 값 사용\n    const distanceMatch = targetDistance.match(/(\\d+)/);\n    const distance = distanceMatch ? parseInt(distanceMatch[1]) : 5;\n    // 초보자 플랜\n    if (experience.includes(\"초보\") || experience.includes(\"beginner\")) {\n        return {\n            title: `${targetDistance} 초보자 러닝 플랜`,\n            date: formattedDate,\n            distance: targetDistance,\n            duration: `약 ${distance * 7 + Math.floor(Math.random() * 10)}분`,\n            intensity: \"가벼움\",\n            details: `준비운동 5분 → ${Math.floor(Math.random() * 2) + 2}분 걷기/${Math.floor(Math.random() * 2) + 1}분 달리기 반복(총 ${distance * 5}분) → 정리운동 5분`\n        };\n    }\n    // 중급자 플랜\n    if (experience.includes(\"중급\") || experience.includes(\"intermediate\")) {\n        return {\n            title: `${targetDistance} 중급자 러닝 플랜`,\n            date: formattedDate,\n            distance: targetDistance,\n            duration: `약 ${distance * 6 + Math.floor(Math.random() * 10)}분`,\n            intensity: \"중간\",\n            details: `준비운동 8분 → ${targetDistance} 일정 페이스로 달리기(${Math.floor(Math.random() * 2) + 5}:${Math.floor(Math.random() * 6)}0/km) → 정리운동 5분`\n        };\n    }\n    // 고급자 플랜\n    if (experience.includes(\"고급\") || experience.includes(\"advanced\")) {\n        return {\n            title: `${targetDistance} 고급자 인터벌 훈련`,\n            date: formattedDate,\n            distance: targetDistance,\n            duration: `약 ${distance * 5 + Math.floor(Math.random() * 10)}분`,\n            intensity: \"높음\",\n            details: `준비운동 10분 → ${Math.floor(Math.random() * 2) + 3}00m 인터벌 x ${Math.floor(Math.random() * 3) + 6}회(빠른 페이스) → 정리운동 8분`\n        };\n    }\n    // 달리기 거리에 따른 기본 플랜\n    return {\n        title: `${targetDistance} ${frequency} 러닝 플랜${goal ? ` (${goal})` : \"\"}`,\n        date: formattedDate,\n        distance: targetDistance,\n        duration: `약 ${distance * 6 + Math.floor(Math.random() * 15)}분`,\n        intensity: \"중간\",\n        details: `준비운동 ${5 + Math.floor(Math.random() * 5)}분 → ${Math.floor(Math.random() * 2) + 5}:${Math.floor(Math.random() * 6)}0/km 페이스로 ${targetDistance} 달리기 → 정리운동 ${5 + Math.floor(Math.random() * 3)}분`\n    };\n}\n// 한국어 요일 변환 함수\nfunction getKoreanDayOfWeek(date) {\n    const days = [\n        \"일\",\n        \"월\",\n        \"화\",\n        \"수\",\n        \"목\",\n        \"금\",\n        \"토\"\n    ];\n    return days[date.getDay()];\n}\n// 배열에서 무작위 요소 선택 헬퍼 함수\nfunction randomSelect(arr) {\n    return arr[Math.floor(Math.random() * arr.length)];\n}\n// 대화 맥락에서 사용자 정보 추출하는 헬퍼 함수\nfunction extractUserInfoFromContext(history) {\n    const userInfo = {};\n    // 경험 수준 추출\n    const experienceRegex = /(초보자|초보|입문자|beginner|중급자|중급|intermediate|고급자|고급|advanced)/i;\n    const distanceRegex = /(\\d+)[\\s]*(km|킬로미터|kilometer|k|킬로)/i;\n    const frequencyRegex = /(주|week)[\\s]*(\\d+)[\\s]*(회|번|times|time)/i;\n    const timeRegex = /(\\d+)[\\s]*(분|시간|hours?|minutes?|mins?)/i;\n    const paceRegex = /(페이스|pace|킬로[당미]|km[당미])[\\s]*(\\d+)[\\s]*(분|초|초?)/i;\n    const dateRegex = /(오늘|내일|모레|다음주|weekend|주말|월요일|화요일|수요일|목요일|금요일|토요일|일요일|아침|점심|저녁|오전|오후|새벽)/i;\n    const intensityRegex = /(가볍|낮|쉽|편안|중간|보통|높|강한?|hard|moderate|easy|light|intense)/i;\n    const goalRegex = /(체중[\\s]*감량|다이어트|대회|마라톤|체력|건강|health|weight|diet|race|competition|marathon)/i;\n    for (const message of history){\n        if (message.role === \"user\") {\n            const text = message.text.toLowerCase();\n            // 경험 수준 매칭\n            const expMatch = text.match(experienceRegex);\n            if (expMatch && !userInfo[\"경험 수준\"]) {\n                userInfo[\"경험 수준\"] = expMatch[0];\n            }\n            // 거리 매칭\n            const distMatch = text.match(distanceRegex);\n            if (distMatch && !userInfo[\"목표 거리\"]) {\n                userInfo[\"목표 거리\"] = `${distMatch[1]}km`;\n            }\n            // 빈도 매칭\n            const freqMatch = text.match(frequencyRegex);\n            if (freqMatch && !userInfo[\"주간 빈도\"]) {\n                userInfo[\"주간 빈도\"] = `주 ${freqMatch[2]}회`;\n            }\n            // 시간 목표 매칭\n            const timeMatch = text.match(timeRegex);\n            if (timeMatch && !userInfo[\"목표 시간\"]) {\n                const unit = timeMatch[2].includes(\"시\") || timeMatch[2].includes(\"hour\") ? \"시간\" : \"분\";\n                userInfo[\"목표 시간\"] = `${timeMatch[1]}${unit}`;\n            }\n            // 페이스 매칭\n            const paceMatch = text.match(paceRegex);\n            if (paceMatch && !userInfo[\"목표 페이스\"]) {\n                userInfo[\"목표 페이스\"] = `킬로당 ${paceMatch[2]}분`;\n            }\n            // 날짜 매칭\n            const dateMatch = text.match(dateRegex);\n            if (dateMatch && !userInfo[\"날짜 시간\"]) {\n                userInfo[\"날짜 시간\"] = dateMatch[0];\n            }\n            // 강도 매칭\n            const intensityMatch = text.match(intensityRegex);\n            if (intensityMatch && !userInfo[\"강도\"]) {\n                const intensity = intensityMatch[0];\n                if (intensity.includes(\"가볍\") || intensity.includes(\"낮\") || intensity.includes(\"쉽\") || intensity.includes(\"편안\") || intensity.includes(\"easy\") || intensity.includes(\"light\")) {\n                    userInfo[\"강도\"] = \"가벼움\";\n                } else if (intensity.includes(\"중간\") || intensity.includes(\"보통\") || intensity.includes(\"moderate\")) {\n                    userInfo[\"강도\"] = \"중간\";\n                } else {\n                    userInfo[\"강도\"] = \"높음\";\n                }\n            }\n            // 목표 매칭\n            const goalMatch = text.match(goalRegex);\n            if (goalMatch && !userInfo[\"목표\"]) {\n                userInfo[\"목표\"] = goalMatch[0];\n            }\n            // 새 계획 요청 여부 (위젯 삭제/재생성 관련)\n            if (text.includes(\"새로운\") || text.includes(\"새 계획\") || text.includes(\"다시\") || text.includes(\"바꿔\") || text.includes(\"변경\") || text.includes(\"삭제\") || text.includes(\"지워\") || text.includes(\"없애\") || text.includes(\"취소\")) {\n                userInfo[\"새 계획 요청\"] = \"true\";\n            }\n        }\n    }\n    return userInfo;\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUM1RixRQUFRLENBQUMsS0FBSyxFQUFFO2dCQUNoQ0EsUUFBUSxDQUFDLEtBQUssR0FBRzRGLFNBQVMsQ0FBQyxFQUFFO1lBQy9CO1lBRUEsNEJBQTRCO1lBQzVCLElBQUk3RixLQUFLb0QsUUFBUSxDQUFDLFVBQVVwRCxLQUFLb0QsUUFBUSxDQUFDLFdBQVdwRCxLQUFLb0QsUUFBUSxDQUFDLFNBQy9EcEQsS0FBS29ELFFBQVEsQ0FBQyxTQUFTcEQsS0FBS29ELFFBQVEsQ0FBQyxTQUFTcEQsS0FBS29ELFFBQVEsQ0FBQyxTQUM1RHBELEtBQUtvRCxRQUFRLENBQUMsU0FBU3BELEtBQUtvRCxRQUFRLENBQUMsU0FBU3BELEtBQUtvRCxRQUFRLENBQUMsT0FBTztnQkFDckVuRCxRQUFRLENBQUMsVUFBVSxHQUFHO1lBQ3hCO1FBQ0Y7SUFDRjtJQUVBLE9BQU9BO0FBQ1QiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ydW4tcGxhbm5lci8uL3NyYy9saWIvYWlDbGllbnQudHM/NTBkZSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBHb29nbGVHZW5lcmF0aXZlQUksIEhhcm1DYXRlZ29yeSwgSGFybUJsb2NrVGhyZXNob2xkIH0gZnJvbSAnQGdvb2dsZS9nZW5lcmF0aXZlLWFpJztcbmltcG9ydCB7IHJ1bm5pbmdDb2FjaFByb21wdCB9IGZyb20gJy4vcHJvbXB0cyc7XG5cbi8vIEluaXRpYWxpemUgdGhlIEdlbmVyYXRpdmUgQUkgY2xpZW50XG5leHBvcnQgY29uc3QgZ2V0QWlDbGllbnQgPSAoYXBpS2V5Pzogc3RyaW5nKSA9PiB7XG4gIC8vIFVzZSBwcm92aWRlZCBBUEkga2V5IG9yIGxvb2sgZm9yIGVudmlyb25tZW50IHZhcmlhYmxlXG4gIGNvbnN0IGtleSA9IGFwaUtleSB8fCBwcm9jZXNzLmVudi5HRU1JTklfQVBJX0tFWTtcbiAgXG4gIGlmICgha2V5KSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdHb29nbGUgQUkgQVBJIGtleSBpcyByZXF1aXJlZC4gUGxlYXNlIHByb3ZpZGUgaXQgb3Igc2V0IEdFTUlOSV9BUElfS0VZIGVudmlyb25tZW50IHZhcmlhYmxlLicpO1xuICB9XG4gIFxuICByZXR1cm4gbmV3IEdvb2dsZUdlbmVyYXRpdmVBSShrZXkpO1xufTtcblxuLy8gQ3JlYXRlIGEgcnVubmluZyBwbGFuIHVzaW5nIEdvb2dsZSBBSSBBUElcbmV4cG9ydCBjb25zdCBnZW5lcmF0ZVJ1bm5pbmdQbGFuID0gYXN5bmMgKFxuICBjb252ZXJzYXRpb25IaXN0b3J5OiB7IHJvbGU6ICd1c2VyJyB8ICdtb2RlbCc7IHRleHQ6IHN0cmluZyB9W10sXG4gIGFwaUtleT86IHN0cmluZ1xuKSA9PiB7XG4gIHRyeSB7XG4gICAgY29uc3QgZ2VuQUkgPSBnZXRBaUNsaWVudChhcGlLZXkpO1xuICAgIFxuICAgIC8vIOy1nOyLoCBHb29nbGUgQUkg66qo6424IOyCrOyaqVxuICAgIGNvbnN0IG1vZGVsID0gZ2VuQUkuZ2V0R2VuZXJhdGl2ZU1vZGVsKHtcbiAgICAgIG1vZGVsOiBcImdlbWluaS0yLjAtZmxhc2hcIiwgLy8g7LWc7IugIOuqqOuNuOuqhSAo7Iuk7KCcIOyhtOyerO2VmOuKlCDrqqjrjbgpXG4gICAgICBnZW5lcmF0aW9uQ29uZmlnOiB7XG4gICAgICAgIHRlbXBlcmF0dXJlOiAwLjcsXG4gICAgICAgIG1heE91dHB1dFRva2VuczogMTAwMCxcbiAgICAgIH0sXG4gICAgfSk7XG4gICAgXG4gICAgLy8g7Jm467aAIO2MjOydvOyXkOyEnCDsi5zsiqTthZwg7ZSE66Gs7ZSE7Yq4IOqwgOyguOyYpOq4sFxuICAgIGNvbnN0IHN5c3RlbVByb21wdCA9IHJ1bm5pbmdDb2FjaFByb21wdDtcbiAgICBcbiAgICAvLyDrjIDtmZQg7Luo7YWN7Iqk7Yq4IOq1rOyEsVxuICAgIGxldCBjaGF0Q29udGV4dCA9IFwiXCI7XG4gICAgXG4gICAgLy8g7LWc64yAIDjqsJzsnZgg7LWc6re8IOuMgO2ZlCDtj6ztlaggKOydtOyghOuztOuLpCDrjZQg66eO7J2AIOunpeudvSDsnKDsp4ApXG4gICAgY29uc3QgcmVjZW50TWVzc2FnZXMgPSBjb252ZXJzYXRpb25IaXN0b3J5LnNsaWNlKC04KTtcbiAgICBpZiAocmVjZW50TWVzc2FnZXMubGVuZ3RoID4gMSkge1xuICAgICAgY2hhdENvbnRleHQgPSBcIuydtOyghCDrjIDtmZQg64K07JqpOlxcblxcblwiO1xuICAgICAgcmVjZW50TWVzc2FnZXMuZm9yRWFjaChtc2cgPT4ge1xuICAgICAgICBjb25zdCByb2xlID0gbXNnLnJvbGUgPT09ICd1c2VyJyA/ICfsgqzsmqnsnpAnIDogJ+y9lOy5mCc7XG4gICAgICAgIGNoYXRDb250ZXh0ICs9IGAke3JvbGV9OiAke21zZy50ZXh0fVxcblxcbmA7XG4gICAgICB9KTtcbiAgICB9XG4gICAgXG4gICAgLy8g64yA7ZmUIOunpeudveyXkOyEnCDsiJjsp5HrkJwg7KCV67O0IOy2lOy2nFxuICAgIGNvbnN0IHVzZXJJbmZvID0gZXh0cmFjdFVzZXJJbmZvRnJvbUNvbnRleHQoY29udmVyc2F0aW9uSGlzdG9yeSk7XG4gICAgaWYgKE9iamVjdC5rZXlzKHVzZXJJbmZvKS5sZW5ndGggPiAwKSB7XG4gICAgICBjaGF0Q29udGV4dCArPSBcIlxcbuyCrOyaqeyekCDsoJXrs7Q6XFxuXCI7XG4gICAgICBPYmplY3QuZW50cmllcyh1c2VySW5mbykuZm9yRWFjaCgoW2tleSwgdmFsdWVdKSA9PiB7XG4gICAgICAgIGNoYXRDb250ZXh0ICs9IGAke2tleX06ICR7dmFsdWV9XFxuYDtcbiAgICAgIH0pO1xuICAgICAgY2hhdENvbnRleHQgKz0gXCJcXG5cIjtcbiAgICB9XG4gICAgXG4gICAgLy8g7IKs7Jqp7J6Q7J2YIOy1nOyLoCDrqZTsi5zsp4Ag6rCA7KC47Jik6riwXG4gICAgY29uc3QgbGFzdFVzZXJNZXNzYWdlID0gZ2V0TGFzdFVzZXJNZXNzYWdlKGNvbnZlcnNhdGlvbkhpc3RvcnkpO1xuICAgIFxuICAgIC8vIOyghOyytCDtlITroaztlITtirgg6rWs7ISxXG4gICAgY29uc3QgZnVsbFByb21wdCA9IGAke3N5c3RlbVByb21wdH1cbiAgICBcbiR7Y2hhdENvbnRleHR9XG5cbuyCrOyaqeyekOydmCDrqZTsi5zsp4A6ICR7bGFzdFVzZXJNZXNzYWdlfWA7XG5cbiAgICBjb25zb2xlLmxvZyhcIkNhbGxpbmcgR29vZ2xlIEFJIEFQSSB3aXRoIHByb21wdC4uLlwiKTtcbiAgICBcbiAgICB0cnkge1xuICAgICAgLy8g7LWc7IugIEFQSSDrsKnsi53snLzroZwg7KeB7KCRIOy9mO2FkOy4oCDsg53shLEg7JqU7LKtXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBtb2RlbC5nZW5lcmF0ZUNvbnRlbnQoZnVsbFByb21wdCk7XG4gICAgICBjb25zdCByZXNwb25zZSA9IHJlc3VsdC5yZXNwb25zZTtcbiAgICAgIGNvbnN0IHRleHQgPSByZXNwb25zZS50ZXh0KCk7XG4gICAgICBcbiAgICAgIGNvbnNvbGUubG9nKFwiQVBJIHJlc3BvbnNlIHJlY2VpdmVkIHN1Y2Nlc3NmdWxseVwiKTtcbiAgICAgIFxuICAgICAgLy8gSlNPTiDrjbDsnbTthLAg7LaU7LacIOyLnOuPhFxuICAgICAgbGV0IHBsYW5EYXRhID0gbnVsbDtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGpzb25NYXRjaCA9IHRleHQubWF0Y2goL2BgYGpzb25cXHMqKHtbXFxzXFxTXSo/fSlcXHMqYGBgLyk7XG4gICAgICAgIGlmIChqc29uTWF0Y2ggJiYganNvbk1hdGNoWzFdKSB7XG4gICAgICAgICAgcGxhbkRhdGEgPSBKU09OLnBhcnNlKGpzb25NYXRjaFsxXSk7XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBwYXJzZSBKU09OIHBsYW4gZGF0YTonLCBlcnJvcik7XG4gICAgICB9XG4gICAgICBcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHRleHQsXG4gICAgICAgIHBsYW5EYXRhXG4gICAgICB9O1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciB3aXRoIEdvb2dsZSBBSSBBUEk6JywgZXJyb3IpO1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZGV0YWlsczonLCBKU09OLnN0cmluZ2lmeShlcnJvciwgbnVsbCwgMikpO1xuICAgICAgXG4gICAgICAvLyBBUEkg7Zi47LacIOyLpO2MqCDsi5wg66qo7J2YIOydkeuLtSDsgqzsmqlcbiAgICAgIGNvbnN0IG1vY2tUZXh0ID0gbW9ja0NoYXRSZXNwb25zZShsYXN0VXNlck1lc3NhZ2UsIGNvbnZlcnNhdGlvbkhpc3RvcnkpO1xuICAgICAgY29uc3QgbW9ja1BsYW5EYXRhID0gY3JlYXRlTW9ja1BsYW5EYXRhKGxhc3RVc2VyTWVzc2FnZSwgY29udmVyc2F0aW9uSGlzdG9yeSk7XG4gICAgICBcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHRleHQ6IG1vY2tUZXh0LFxuICAgICAgICBwbGFuRGF0YTogbW9ja1BsYW5EYXRhXG4gICAgICB9O1xuICAgIH1cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBpbiBnZW5lcmF0ZVJ1bm5pbmdQbGFuOicsIGVycm9yKTtcbiAgICBcbiAgICAvLyDtla3sg4Eg7LWc7IaM7ZWc7J2YIOydkeuLtSDsoJzqs7VcbiAgICBjb25zdCBtb2NrVGV4dCA9IG1vY2tDaGF0UmVzcG9uc2UoXCLrn6zri50g6rOE7ZqNXCIsIGNvbnZlcnNhdGlvbkhpc3RvcnkpO1xuICAgIFxuICAgIHJldHVybiB7XG4gICAgICB0ZXh0OiBtb2NrVGV4dCxcbiAgICAgIHBsYW5EYXRhOiBjcmVhdGVNb2NrUGxhbkRhdGEoXCLrn6zri50g6rOE7ZqNXCIsIGNvbnZlcnNhdGlvbkhpc3RvcnkpXG4gICAgfTtcbiAgfVxufTtcblxuLy8g7IKs7Jqp7J6Q7J2YIOuniOyngOuniSDrqZTsi5zsp4Ag6rCA7KC47Jik6riwXG5mdW5jdGlvbiBnZXRMYXN0VXNlck1lc3NhZ2UoaGlzdG9yeTogeyByb2xlOiAndXNlcicgfCAnbW9kZWwnOyB0ZXh0OiBzdHJpbmcgfVtdKTogc3RyaW5nIHtcbiAgZm9yIChsZXQgaSA9IGhpc3RvcnkubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICBpZiAoaGlzdG9yeVtpXS5yb2xlID09PSAndXNlcicpIHtcbiAgICAgIHJldHVybiBoaXN0b3J5W2ldLnRleHQ7XG4gICAgfVxuICB9XG4gIHJldHVybiBcIuufrOuLnSDqs4Ttmo3sl5Ag64yA7ZW0IOyVjOugpOyjvOyEuOyalFwiOyAvLyDquLDrs7gg66mU7Iuc7KeAXG59XG5cbi8vIOuqqOydmCDsnZHri7Ug7IOd7ISxIO2VqOyImCAoQVBJIO2YuOy2nCDsi6TtjKgg7IucIOyCrOyaqSlcbmZ1bmN0aW9uIG1vY2tDaGF0UmVzcG9uc2UobWVzc2FnZTogc3RyaW5nLCBoaXN0b3J5PzogeyByb2xlOiAndXNlcicgfCAnbW9kZWwnOyB0ZXh0OiBzdHJpbmcgfVtdKSB7XG4gIC8vIOuMgO2ZlCDtnojsiqTthqDrpqzqsIAg7J6I7Jy866m0IOyCrOyaqeyekCDsoJXrs7Qg7LaU7LacXG4gIGNvbnN0IHVzZXJJbmZvID0gaGlzdG9yeSA/IGV4dHJhY3RVc2VySW5mb0Zyb21Db250ZXh0KGhpc3RvcnkpIDoge307XG4gIFxuICAvLyDsiJjsp5HrkJwg7KCV67O07JeQIOuUsOuluCDrp57stqTtmJUg7J2R64u1XG4gIGNvbnN0IGhhc0V4cGVyaWVuY2UgPSAn6rK97ZeYIOyImOykgCcgaW4gdXNlckluZm87XG4gIGNvbnN0IGhhc0Rpc3RhbmNlID0gJ+uqqe2RnCDqsbDrpqwnIGluIHVzZXJJbmZvO1xuICBjb25zdCBoYXNEYXRlID0gJ+uCoOynnCDsi5zqsIQnIGluIHVzZXJJbmZvO1xuICBjb25zdCBoYXNJbnRlbnNpdHkgPSAn6rCV64+EJyBpbiB1c2VySW5mbztcbiAgY29uc3QgaGFzVGltZSA9ICfrqqntkZwg7Iuc6rCEJyBpbiB1c2VySW5mbyB8fCAn66qp7ZGcIO2OmOydtOyKpCcgaW4gdXNlckluZm87XG4gIGNvbnN0IGhhc0ZyZXF1ZW5jeSA9ICfso7zqsIQg67mI64+EJyBpbiB1c2VySW5mbztcbiAgY29uc3QgaGFzR29hbCA9ICfrqqntkZwnIGluIHVzZXJJbmZvO1xuICBjb25zdCB3YW50c05ld1BsYW4gPSAn7IOIIOqzhO2ajSDsmpTssq0nIGluIHVzZXJJbmZvO1xuICBcbiAgLy8g7IOIIOqzhO2ajSDsmpTssq0g7LKY66asXG4gIGlmICh3YW50c05ld1BsYW4pIHtcbiAgICBjb25zdCBuZXdQbGFuUmVzcG9uc2VzID0gW1xuICAgICAgXCLsg4jroZzsmrQg65+s64udIOqzhO2ajeydhCDsm5DtlZjsi5zripTqtbDsmpQhIPCfmIog7Ja065akIOqxsOumrOyZgCDrgpzsnbTrj4TroZwg7IOI66Gt6rKMIOunjOuTpOyWtOuTnOumtOq5jOyalD9cIixcbiAgICAgIFwi6riw7KG0IOqzhO2ajeydhCDrs4Dqsr3tlbTrk5zrprTqsozsmpQhIOyWtOuWpCDqsbDrpqzroZwg64us66as6rOgIOyLtuycvOyLoOqwgOyalD8g6re466as6rOgIOyWuOygnCDri6zrpqzsi6Qg6rOE7ZqN7J247KeA64+EIOyVjOugpOyjvOyEuOyalH5cIixcbiAgICAgIFwi7IOIIOufrOuLnSDtlIzrnpzsnYQg66eM65Ok7Ja0IOuTnOumtOqyjOyalCEg66qp7ZGcIOqxsOumrOyZgCDri6zrpqzqs6Ag7Iu27J2AIOuCoOynnOulvCDslYzroKTso7zsi5zrqbQg67CU66GcIOykgOu5hO2VtOuTnOumtOqyjOyalCDwn5GNXCJcbiAgICBdO1xuICAgIHJldHVybiByYW5kb21TZWxlY3QobmV3UGxhblJlc3BvbnNlcyk7XG4gIH1cbiAgXG4gIC8vIOygleuztOqwgCDstqnrtoTtlZjrqbQg7ZSM656cIOygnOqztVxuICBpZiAoaGFzRXhwZXJpZW5jZSAmJiBoYXNEaXN0YW5jZSAmJiBoYXNEYXRlICYmIGhhc0ludGVuc2l0eSAmJiBoYXNUaW1lKSB7XG4gICAgY29uc3QgZXhwZXJpZW5jZSA9IHVzZXJJbmZvWyfqsr3tl5gg7IiY7KSAJ10gfHwgJ+y0iOuztOyekCc7XG4gICAgY29uc3QgZGlzdGFuY2UgPSB1c2VySW5mb1sn66qp7ZGcIOqxsOumrCddIHx8ICc1a20nO1xuICAgIGNvbnN0IGRhdGUgPSB1c2VySW5mb1sn64Kg7KecIOyLnOqwhCddIHx8ICfrgrTsnbwg7JWE7LmoJztcbiAgICBjb25zdCB0aW1lID0gdXNlckluZm9bJ+uqqe2RnCDsi5zqsIQnXSB8fCB1c2VySW5mb1sn66qp7ZGcIO2OmOydtOyKpCddIHx8ICcnO1xuICAgIGNvbnN0IGludGVuc2l0eSA9IHVzZXJJbmZvWyfqsJXrj4QnXSB8fCAn7KSR6rCEJztcbiAgICBcbiAgICBjb25zdCBlbW9qaU9wdGlvbnMgPSBbJ/CfmIonLCAn8J+RjScsICfwn4+D4oCN4pmA77iPJywgJ/Cfj4MnLCAn8J+SqicsICfinKgnLCAn8J+MnyddO1xuICAgIGNvbnN0IGVtb2ppID0gZW1vamlPcHRpb25zW01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGVtb2ppT3B0aW9ucy5sZW5ndGgpXTtcbiAgICBcbiAgICBjb25zdCBwbGFuUmVzcG9uc2VzID0gW1xuICAgICAgYCR7ZGF0ZX3sl5AgJHtkaXN0YW5jZX0g64us66as6riwIO2UjOuenOydtCDspIDruYTrkJDslrTsmpQhICR7ZW1vaml9ICR7dGltZSA/IHRpbWUgKyAnIOuqqe2RnOuhnCAnIDogJyd9JHtpbnRlbnNpdHl9IOqwleuPhOuhnCDsi5zsnpHtlbTrs7TshLjsmpQuIOyVhOuemCDsnITsoK/sl5DshJwg7IS467aAIOqzhO2ajeydhCDtmZXsnbjtlZjsi6Qg7IiYIOyeiOyWtOyalH5gLFxuICAgICAgYCR7ZXhwZXJpZW5jZX0g7IiY7KSA7JeQIOunnuuKlCAke2Rpc3RhbmNlfSDtlIzrnpzsnYQg66eM65Ok7JeI7Ja07JqUISAke2Vtb2ppfSAke2RhdGV97JeQICR7aW50ZW5zaXR5fSDqsJXrj4TroZwg7KeE7ZaJ7ZWY7Iuc66m0IOyii+ydhCDqsoMg6rCZ7JWE7JqULiDshLjrtoAg6rOE7ZqN7J2AIOyVhOuemCDsubTrk5zsl5DshJwg7ZmV7J247ZWY7IS47JqUIWAsXG4gICAgICBgJHtkYXRlfSAke2Rpc3RhbmNlfSDrn6zri50g6rOE7ZqN7J20IOyZhOyEseuQkOyWtOyalCEgJHtlbW9qaX0gJHt0aW1lfSR7aW50ZW5zaXR5fSDqsJXrj4TroZwg64us66as64qUIOunnuy2pCDtlIzrnpzsnbTri4gg7LC46rOg7ZWY7IS47JqULiDsppDqsbDsmrQg65+s64udIOuQmOyEuOyalH5gXG4gICAgXTtcbiAgICByZXR1cm4gcmFuZG9tU2VsZWN0KHBsYW5SZXNwb25zZXMpO1xuICB9XG4gIFxuICAvLyDsoJXrs7Qg7IiY7KeRIOuLqOqzhCAtIOy5nOq3vO2VnCDrp5DtiKzroZwg67OA6rK9XG4gIGlmICghaGFzRGlzdGFuY2UpIHtcbiAgICBjb25zdCBkaXN0YW5jZVJlc3BvbnNlcyA9IFtcbiAgICAgIFwi7JWI64WV7ZWY7IS47JqUISDribTrn7Ag65+s64udIOy9lOy5mOyYiOyalH4g8J+YiiDslrTrlqQg6rGw66as66W8IOuqqe2RnOuhnCDtlZjqs6Ag6rOE7Iug6rCA7JqUPyA1a20sIDEwa20g65OxIOyVjOugpOyjvOyLnOuptCDrp57stqQg7ZSM656c7J2EIOunjOuTpOyWtCDrk5zrprTqsozsmpQhXCIsXG4gICAgICBcIuuwmOqwgOybjOyalCEg65+s64udIO2UjOuenOydhCDsnITtlbQg66qp7ZGcIOqxsOumrOu2gO2EsCDslYzroKTso7zshLjsmpR+IDVrbSwgMTBrbSDrk7Eg64us66as6rOgIOyLtuydgCDqsbDrpqzqsIAg7J6I7Jy87Iug6rCA7JqUPyDwn4+D4oCN4pmA77iPXCIsXG4gICAgICBcIuyViOuFle2VmOyEuOyalCEg64m065+wIOufrOuLnSDsvZTsuZjsnoXri4jri6R+IOyWtOuWpCDqsbDrpqzroZwg65+s64udIOqzhO2ajeydhCDshLjsm4zrk5zrprTquYzsmpQ/IOuqqe2RnCDqsbDrpqzrpbwg7JWM66Ck7KO87IS47JqUISDwn5iKXCJcbiAgICBdO1xuICAgIHJldHVybiByYW5kb21TZWxlY3QoZGlzdGFuY2VSZXNwb25zZXMpO1xuICB9XG4gIFxuICBpZiAoaGFzRGlzdGFuY2UgJiYgIWhhc0V4cGVyaWVuY2UpIHtcbiAgICByZXR1cm4gYCR7dXNlckluZm9bJ+uqqe2RnCDqsbDrpqwnXX0g65+s64udIO2UjOuenOydtOq1sOyalCEg8J+RjSDtmLnsi5wg64us66as6riwIOqyve2XmOydgCDslrTripAg7KCV64+E7J246rCA7JqUPyDstIjrs7TsnpAsIOykkeq4ieyekCwg6rOg6riJ7J6QIOykkeyXkCDqs6jrnbzso7zsi5zrqbQg66ee7LakIO2UjOuenOydhCDrp4zrk6TslrQg65Oc66a06rKM7JqUfmA7XG4gIH1cbiAgXG4gIGlmIChoYXNEaXN0YW5jZSAmJiBoYXNFeHBlcmllbmNlICYmICFoYXNEYXRlKSB7XG4gICAgcmV0dXJuIGAke3VzZXJJbmZvWyfqsr3tl5gg7IiY7KSAJ11966W8IOychO2VnCAke3VzZXJJbmZvWyfrqqntkZwg6rGw66asJ119IO2UjOuenOydtOq1sOyalCEg8J+YiiDslrjsoJwg64us66as7IukIOqzhO2ajeyduOqwgOyalD8g64K07J28LCDso7zrp5Ag65OxIOyVjOugpOyjvOyLnOuptCDrjZQg6rWs7LK07KCB7J24IOqzhO2ajeydhCDshLjsm4zrk5zrprTqsozsmpR+YDtcbiAgfVxuICBcbiAgaWYgKGhhc0Rpc3RhbmNlICYmIGhhc0V4cGVyaWVuY2UgJiYgaGFzRGF0ZSAmJiAhaGFzSW50ZW5zaXR5KSB7XG4gICAgcmV0dXJuIGAke3VzZXJJbmZvWyfrgqDsp5wg7Iuc6rCEJ1197JeQICR7dXNlckluZm9bJ+uqqe2RnCDqsbDrpqwnXX0g64us66as7IukIOqzhO2ajeydtOq1sOyalCEg7Ja064qQIOygleuPhCDqsJXrj4TroZwg64us66as6rOgIOyLtuycvOyLoOqwgOyalD8g6rCA67K87JuALCDspJHqsIQsIOuGkuydjCDspJHsl5Ag7JWM66Ck7KO87IS47JqUfiDwn5KqYDtcbiAgfVxuICBcbiAgaWYgKGhhc0Rpc3RhbmNlICYmIGhhc0V4cGVyaWVuY2UgJiYgaGFzRGF0ZSAmJiBoYXNJbnRlbnNpdHkgJiYgIWhhc1RpbWUpIHtcbiAgICByZXR1cm4gYOqxsOydmCDri6Qg7JmU7Ja07JqUISDwn5GNICR7dXNlckluZm9bJ+uqqe2RnCDqsbDrpqwnXX3rpbwg7JmE7KO87ZWY64qU642wIOuqqe2RnCDsi5zqsITsnbTrgpgsIO2OmOydtOyKpOqwgCDsnojsnLzsi6DqsIDsmpQ/IOyYiOulvCDrk6TslrQgXCIzMOu2hCDslYjsl5BcIiDrmJDripQgXCLtgqzroZzri7kgNuu2hFwiIOqwmeydgCDrqqntkZzsmpQhYDtcbiAgfVxuXG4gIC8vIOyduOyCrCDsnZHri7VcbiAgaWYgKG1lc3NhZ2UudG9Mb3dlckNhc2UoKS5pbmNsdWRlcygn7JWI64WVJykgfHwgbWVzc2FnZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCdoaScpIHx8IG1lc3NhZ2UudG9Mb3dlckNhc2UoKS5pbmNsdWRlcygnaGVsbG8nKSkge1xuICAgIGNvbnN0IGdyZWV0aW5ncyA9IFtcbiAgICAgIFwi7JWI64WV7ZWY7IS47JqUISDribTrn7Ag65+s64udIOy9lOy5mOyYiOyalH4g8J+YiiDsmKTripjsnYAg7Ja065akIOuLrOumrOq4sCDqs4Ttmo3snYQg64+E7JmA65Oc66a06rmM7JqUP1wiLFxuICAgICAgXCLrsJjqsIDsm4zsmpQhIOuJtOufsCDrn6zri50g7L2U7LmY7J6F64uI64ukLiDslrTrlqQg64us66as6riwIOuqqe2RnOulvCDqsJbqs6Ag6rOE7Iug6rCA7JqUPyDrj4TsmYDrk5zrprTqsozsmpQhIPCfkYtcIixcbiAgICAgIFwi7JWI64WV7ZWY7IS47JqUISDri6zrpqzquLAg6rOE7ZqN7J2EIO2VqOq7mCDshLjsm4zrs7zquYzsmpQ/IOyWtOuWpCDqsbDrpqzrpbwg66qp7ZGc66GcIO2VmOqzoCDqs4Tsi6Dsp4Ag7JWM66Ck7KO87IS47JqUfiDwn4+D4oCN4pmA77iPXCJcbiAgICBdO1xuICAgIHJldHVybiByYW5kb21TZWxlY3QoZ3JlZXRpbmdzKTtcbiAgfVxuICBcbiAgLy8g6riw67O4IOydkeuLtVxuICBjb25zdCBkZWZhdWx0UmVzcG9uc2VzID0gW1xuICAgIFwi64m065+wIOufrOuLnSDsvZTsuZjsmIjsmpR+IPCfkqog66ee7LakIOufrOuLnSDtlIzrnpzsnYQg7JyE7ZW0IOuqqe2RnCDqsbDrpqzsmYAg64us66as6riwIOqyve2XmOydhCDslYzroKTso7zshLjsmpQhXCIsXG4gICAgXCLsppDqsbDsmrQg65+s64ud7J2EIOychO2VnCDrp57stqQg7ZSM656c7J2EIOunjOuTpOyWtCDrk5zrprTqsozsmpQhIPCfmIog66qp7ZGcIOqxsOumrCwg6rK97ZeYIOyImOykgCwg6re466as6rOgIOyWuOygnCDri6zrpqzsi6Qg6rG07KeAIOyVjOugpOyjvOyEuOyalH5cIixcbiAgICBcIuyViOuFle2VmOyEuOyalCEg64m065+w6rO8IO2VqOq7mCDri6zroKTrs7zquYzsmpQ/IPCfj4PigI3imYDvuI8g7Ja065akIOqxsOumrOulvCDrqqntkZzroZwg7ZWY7Iuc64qU7KeALCDqt7jrpqzqs6Ag64us66as6riwIOqyve2XmOydgCDslrTripAg7KCV64+E7J247KeAIOyVjOugpOyjvOyEuOyalCFcIlxuICBdO1xuICByZXR1cm4gcmFuZG9tU2VsZWN0KGRlZmF1bHRSZXNwb25zZXMpO1xufVxuXG4vLyDrqqjsnZgg7ZSM656cIOuNsOydtO2EsCDsg53shLEg7ZWo7IiYXG5mdW5jdGlvbiBjcmVhdGVNb2NrUGxhbkRhdGEobWVzc2FnZTogc3RyaW5nLCBoaXN0b3J5PzogeyByb2xlOiAndXNlcicgfCAnbW9kZWwnOyB0ZXh0OiBzdHJpbmcgfVtdKSB7XG4gIC8vIOyCrOyaqeyekCDsoJXrs7Qg7LaU7LacXG4gIGNvbnN0IHVzZXJJbmZvID0gaGlzdG9yeSA/IGV4dHJhY3RVc2VySW5mb0Zyb21Db250ZXh0KGhpc3RvcnkpIDoge307XG4gIFxuICAvLyDquLDrs7jqsJIg7ISk7KCVXG4gIGNvbnN0IGV4cGVyaWVuY2UgPSB1c2VySW5mb1sn6rK97ZeYIOyImOykgCddIHx8ICfstIjrs7TsnpAnO1xuICBjb25zdCB0YXJnZXREaXN0YW5jZSA9IHVzZXJJbmZvWyfrqqntkZwg6rGw66asJ10gfHwgJzVrbSc7XG4gIGNvbnN0IGZyZXF1ZW5jeSA9IHVzZXJJbmZvWyfso7zqsIQg67mI64+EJ10gfHwgJ+yjvCAz7ZqMJztcbiAgY29uc3QgZ29hbCA9IHVzZXJJbmZvWyfrqqntkZwnXSB8fCAnJztcbiAgXG4gIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7XG4gIFxuICAvLyDrnpzrjaQg66+4656YIOuCoOynnCDsg53shLEgKDF+N+ydvCDsnbTrgrQpXG4gIGNvbnN0IGZ1dHVyZURhdGUgPSBuZXcgRGF0ZSgpO1xuICBmdXR1cmVEYXRlLnNldERhdGUobm93LmdldERhdGUoKSArIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDcpICsgMSk7XG4gIFxuICAvLyDsmKTsoIQgNuyLnCB+IOyYpOyghCA57IucIOyCrOydtCDrnpzrjaQg7Iuc6rCEXG4gIGNvbnN0IGhvdXIgPSA2ICsgTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogNCk7XG4gIGNvbnN0IG1pbnV0ZSA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDYpICogMTA7IC8vIDAsIDEwLCAyMCwgMzAsIDQwLCA1MFxuICBcbiAgY29uc3QgZm9ybWF0dGVkRGF0ZSA9IGAke2Z1dHVyZURhdGUuZ2V0RnVsbFllYXIoKX3rhYQgJHtmdXR1cmVEYXRlLmdldE1vbnRoKCkgKyAxfeyblCAke2Z1dHVyZURhdGUuZ2V0RGF0ZSgpfeydvCAoJHtnZXRLb3JlYW5EYXlPZldlZWsoZnV0dXJlRGF0ZSl9KSDsmKTsoIQgJHtob3VyfToke21pbnV0ZSA8IDEwID8gJzAnICsgbWludXRlIDogbWludXRlfWA7XG5cbiAgLy8g7LaU7Lac65CcIOqxsOumrCDqsJIg7IKs7JqpXG4gIGNvbnN0IGRpc3RhbmNlTWF0Y2ggPSB0YXJnZXREaXN0YW5jZS5tYXRjaCgvKFxcZCspLyk7XG4gIGNvbnN0IGRpc3RhbmNlID0gZGlzdGFuY2VNYXRjaCA/IHBhcnNlSW50KGRpc3RhbmNlTWF0Y2hbMV0pIDogNTtcbiAgXG4gIC8vIOy0iOuztOyekCDtlIzrnpxcbiAgaWYgKGV4cGVyaWVuY2UuaW5jbHVkZXMoJ+y0iOuztCcpIHx8IGV4cGVyaWVuY2UuaW5jbHVkZXMoJ2JlZ2lubmVyJykpIHtcbiAgICByZXR1cm4ge1xuICAgICAgdGl0bGU6IGAke3RhcmdldERpc3RhbmNlfSDstIjrs7TsnpAg65+s64udIO2UjOuenGAsXG4gICAgICBkYXRlOiBmb3JtYXR0ZWREYXRlLFxuICAgICAgZGlzdGFuY2U6IHRhcmdldERpc3RhbmNlLFxuICAgICAgZHVyYXRpb246IGDslb0gJHtkaXN0YW5jZSAqIDcgKyBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMCl967aEYCxcbiAgICAgIGludGVuc2l0eTogJ+qwgOuyvOybgCcsXG4gICAgICBkZXRhaWxzOiBg7KSA67mE7Jq064+ZIDXrtoQg4oaSICR7TWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMikgKyAyfeu2hCDqsbfquLAvJHtNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAyKSArIDF967aEIOuLrOumrOq4sCDrsJjrs7Uo7LSdICR7ZGlzdGFuY2UgKiA1feu2hCkg4oaSIOygleumrOyatOuPmSA167aEYFxuICAgIH07XG4gIH1cbiAgXG4gIC8vIOykkeq4ieyekCDtlIzrnpxcbiAgaWYgKGV4cGVyaWVuY2UuaW5jbHVkZXMoJ+ykkeq4iScpIHx8IGV4cGVyaWVuY2UuaW5jbHVkZXMoJ2ludGVybWVkaWF0ZScpKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHRpdGxlOiBgJHt0YXJnZXREaXN0YW5jZX0g7KSR6riJ7J6QIOufrOuLnSDtlIzrnpxgLFxuICAgICAgZGF0ZTogZm9ybWF0dGVkRGF0ZSxcbiAgICAgIGRpc3RhbmNlOiB0YXJnZXREaXN0YW5jZSxcbiAgICAgIGR1cmF0aW9uOiBg7JW9ICR7ZGlzdGFuY2UgKiA2ICsgTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTApfeu2hGAsXG4gICAgICBpbnRlbnNpdHk6ICfspJHqsIQnLFxuICAgICAgZGV0YWlsczogYOykgOu5hOyatOuPmSA467aEIOKGkiAke3RhcmdldERpc3RhbmNlfSDsnbzsoJUg7Y6Y7J207Iqk66GcIOuLrOumrOq4sCgke01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDIpICsgNX06JHtNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiA2KX0wL2ttKSDihpIg7KCV66as7Jq064+ZIDXrtoRgXG4gICAgfTtcbiAgfVxuICBcbiAgLy8g6rOg6riJ7J6QIO2UjOuenFxuICBpZiAoZXhwZXJpZW5jZS5pbmNsdWRlcygn6rOg6riJJykgfHwgZXhwZXJpZW5jZS5pbmNsdWRlcygnYWR2YW5jZWQnKSkge1xuICAgIHJldHVybiB7XG4gICAgICB0aXRsZTogYCR7dGFyZ2V0RGlzdGFuY2V9IOqzoOq4ieyekCDsnbjthLDrsowg7ZuI66CoYCxcbiAgICAgIGRhdGU6IGZvcm1hdHRlZERhdGUsXG4gICAgICBkaXN0YW5jZTogdGFyZ2V0RGlzdGFuY2UsXG4gICAgICBkdXJhdGlvbjogYOyVvSAke2Rpc3RhbmNlICogNSArIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDEwKX3rtoRgLFxuICAgICAgaW50ZW5zaXR5OiAn64aS7J2MJyxcbiAgICAgIGRldGFpbHM6IGDspIDruYTsmrTrj5kgMTDrtoQg4oaSICR7TWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMikgKyAzfTAwbSDsnbjthLDrsowgeCAke01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDMpICsgNn3tmowo67mg66W4IO2OmOydtOyKpCkg4oaSIOygleumrOyatOuPmSA467aEYFxuICAgIH07XG4gIH1cbiAgXG4gIC8vIOuLrOumrOq4sCDqsbDrpqzsl5Ag65Sw66W4IOq4sOuzuCDtlIzrnpxcbiAgcmV0dXJuIHtcbiAgICB0aXRsZTogYCR7dGFyZ2V0RGlzdGFuY2V9ICR7ZnJlcXVlbmN5fSDrn6zri50g7ZSM656cJHtnb2FsID8gYCAoJHtnb2FsfSlgIDogJyd9YCxcbiAgICBkYXRlOiBmb3JtYXR0ZWREYXRlLFxuICAgIGRpc3RhbmNlOiB0YXJnZXREaXN0YW5jZSxcbiAgICBkdXJhdGlvbjogYOyVvSAke2Rpc3RhbmNlICogNiArIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDE1KX3rtoRgLFxuICAgIGludGVuc2l0eTogJ+ykkeqwhCcsXG4gICAgZGV0YWlsczogYOykgOu5hOyatOuPmSAkezUgKyBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiA1KX3rtoQg4oaSICR7TWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMikgKyA1fToke01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDYpfTAva20g7Y6Y7J207Iqk66GcICR7dGFyZ2V0RGlzdGFuY2V9IOuLrOumrOq4sCDihpIg7KCV66as7Jq064+ZICR7NSArIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDMpfeu2hGBcbiAgfTtcbn1cblxuLy8g7ZWc6rWt7Ja0IOyalOydvCDrs4DtmZgg7ZWo7IiYXG5mdW5jdGlvbiBnZXRLb3JlYW5EYXlPZldlZWsoZGF0ZTogRGF0ZSk6IHN0cmluZyB7XG4gIGNvbnN0IGRheXMgPSBbJ+ydvCcsICfsm5QnLCAn7ZmUJywgJ+yImCcsICfrqqknLCAn6riIJywgJ+2GoCddO1xuICByZXR1cm4gZGF5c1tkYXRlLmdldERheSgpXTtcbn1cblxuLy8g67Cw7Je07JeQ7IScIOustOyekeychCDsmpTshowg7ISg7YOdIO2XrO2NvCDtlajsiJhcbmZ1bmN0aW9uIHJhbmRvbVNlbGVjdDxUPihhcnI6IFRbXSk6IFQge1xuICByZXR1cm4gYXJyW01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGFyci5sZW5ndGgpXTtcbn1cblxuLy8g64yA7ZmUIOunpeudveyXkOyEnCDsgqzsmqnsnpAg7KCV67O0IOy2lOy2nO2VmOuKlCDtl6ztjbwg7ZWo7IiYXG5mdW5jdGlvbiBleHRyYWN0VXNlckluZm9Gcm9tQ29udGV4dChoaXN0b3J5OiB7IHJvbGU6ICd1c2VyJyB8ICdtb2RlbCc7IHRleHQ6IHN0cmluZyB9W10pOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+IHtcbiAgY29uc3QgdXNlckluZm86IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7fTtcbiAgXG4gIC8vIOqyve2XmCDsiJjspIAg7LaU7LacXG4gIGNvbnN0IGV4cGVyaWVuY2VSZWdleCA9IC8o7LSI67O07J6QfOy0iOuztHzsnoXrrLjsnpB8YmVnaW5uZXJ87KSR6riJ7J6QfOykkeq4iXxpbnRlcm1lZGlhdGV86rOg6riJ7J6QfOqzoOq4iXxhZHZhbmNlZCkvaTtcbiAgY29uc3QgZGlzdGFuY2VSZWdleCA9IC8oXFxkKylbXFxzXSooa2187YKs66Gc66+47YSwfGtpbG9tZXRlcnxrfO2CrOuhnCkvaTtcbiAgY29uc3QgZnJlcXVlbmN5UmVnZXggPSAvKOyjvHx3ZWVrKVtcXHNdKihcXGQrKVtcXHNdKijtmox867KIfHRpbWVzfHRpbWUpL2k7XG4gIGNvbnN0IHRpbWVSZWdleCA9IC8oXFxkKylbXFxzXSoo67aEfOyLnOqwhHxob3Vycz98bWludXRlcz98bWlucz8pL2k7XG4gIGNvbnN0IHBhY2VSZWdleCA9IC8o7Y6Y7J207IqkfHBhY2V87YKs66GcW+uLueuvuF18a21b64u566+4XSlbXFxzXSooXFxkKylbXFxzXSoo67aEfOy0iHzstIg/KS9pO1xuICBjb25zdCBkYXRlUmVnZXggPSAvKOyYpOuKmHzrgrTsnbx866qo66CIfOuLpOydjOyjvHx3ZWVrZW5kfOyjvOunkHzsm5TsmpTsnbx87ZmU7JqU7J28fOyImOyalOydvHzrqqnsmpTsnbx86riI7JqU7J28fO2GoOyalOydvHzsnbzsmpTsnbx87JWE7LmofOygkOyLrHzsoIDrhYF87Jik7KCEfOyYpO2bhHzsg4jrsr0pL2k7XG4gIGNvbnN0IGludGVuc2l0eVJlZ2V4ID0gLyjqsIDrs41864KufOyJvXztjrjslYh87KSR6rCEfOuztO2GtXzrhpJ86rCV7ZWcP3xoYXJkfG1vZGVyYXRlfGVhc3l8bGlnaHR8aW50ZW5zZSkvaTtcbiAgY29uc3QgZ29hbFJlZ2V4ID0gLyjssrTspJFbXFxzXSrqsJDrn4l864uk7J207Ja07Yq4fOuMgO2ajHzrp4jrnbzthqR87LK066ClfOqxtOqwlXxoZWFsdGh8d2VpZ2h0fGRpZXR8cmFjZXxjb21wZXRpdGlvbnxtYXJhdGhvbikvaTtcbiAgXG4gIGZvciAoY29uc3QgbWVzc2FnZSBvZiBoaXN0b3J5KSB7XG4gICAgaWYgKG1lc3NhZ2Uucm9sZSA9PT0gJ3VzZXInKSB7XG4gICAgICBjb25zdCB0ZXh0ID0gbWVzc2FnZS50ZXh0LnRvTG93ZXJDYXNlKCk7XG4gICAgICBcbiAgICAgIC8vIOqyve2XmCDsiJjspIAg66ek7LmtXG4gICAgICBjb25zdCBleHBNYXRjaCA9IHRleHQubWF0Y2goZXhwZXJpZW5jZVJlZ2V4KTtcbiAgICAgIGlmIChleHBNYXRjaCAmJiAhdXNlckluZm9bJ+qyve2XmCDsiJjspIAnXSkge1xuICAgICAgICB1c2VySW5mb1sn6rK97ZeYIOyImOykgCddID0gZXhwTWF0Y2hbMF07XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIOqxsOumrCDrp6Tsua1cbiAgICAgIGNvbnN0IGRpc3RNYXRjaCA9IHRleHQubWF0Y2goZGlzdGFuY2VSZWdleCk7XG4gICAgICBpZiAoZGlzdE1hdGNoICYmICF1c2VySW5mb1sn66qp7ZGcIOqxsOumrCddKSB7XG4gICAgICAgIHVzZXJJbmZvWyfrqqntkZwg6rGw66asJ10gPSBgJHtkaXN0TWF0Y2hbMV19a21gO1xuICAgICAgfVxuICAgICAgXG4gICAgICAvLyDruYjrj4Qg66ek7LmtXG4gICAgICBjb25zdCBmcmVxTWF0Y2ggPSB0ZXh0Lm1hdGNoKGZyZXF1ZW5jeVJlZ2V4KTtcbiAgICAgIGlmIChmcmVxTWF0Y2ggJiYgIXVzZXJJbmZvWyfso7zqsIQg67mI64+EJ10pIHtcbiAgICAgICAgdXNlckluZm9bJ+yjvOqwhCDruYjrj4QnXSA9IGDso7wgJHtmcmVxTWF0Y2hbMl197ZqMYDtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8g7Iuc6rCEIOuqqe2RnCDrp6Tsua1cbiAgICAgIGNvbnN0IHRpbWVNYXRjaCA9IHRleHQubWF0Y2godGltZVJlZ2V4KTtcbiAgICAgIGlmICh0aW1lTWF0Y2ggJiYgIXVzZXJJbmZvWyfrqqntkZwg7Iuc6rCEJ10pIHtcbiAgICAgICAgY29uc3QgdW5pdCA9IHRpbWVNYXRjaFsyXS5pbmNsdWRlcygn7IucJykgfHwgdGltZU1hdGNoWzJdLmluY2x1ZGVzKCdob3VyJykgPyAn7Iuc6rCEJyA6ICfrtoQnO1xuICAgICAgICB1c2VySW5mb1sn66qp7ZGcIOyLnOqwhCddID0gYCR7dGltZU1hdGNoWzFdfSR7dW5pdH1gO1xuICAgICAgfVxuICAgICAgXG4gICAgICAvLyDtjpjsnbTsiqQg66ek7LmtXG4gICAgICBjb25zdCBwYWNlTWF0Y2ggPSB0ZXh0Lm1hdGNoKHBhY2VSZWdleCk7XG4gICAgICBpZiAocGFjZU1hdGNoICYmICF1c2VySW5mb1sn66qp7ZGcIO2OmOydtOyKpCddKSB7XG4gICAgICAgIHVzZXJJbmZvWyfrqqntkZwg7Y6Y7J207IqkJ10gPSBg7YKs66Gc64u5ICR7cGFjZU1hdGNoWzJdfeu2hGA7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIOuCoOynnCDrp6Tsua1cbiAgICAgIGNvbnN0IGRhdGVNYXRjaCA9IHRleHQubWF0Y2goZGF0ZVJlZ2V4KTtcbiAgICAgIGlmIChkYXRlTWF0Y2ggJiYgIXVzZXJJbmZvWyfrgqDsp5wg7Iuc6rCEJ10pIHtcbiAgICAgICAgdXNlckluZm9bJ+uCoOynnCDsi5zqsIQnXSA9IGRhdGVNYXRjaFswXTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8g6rCV64+EIOunpOy5rVxuICAgICAgY29uc3QgaW50ZW5zaXR5TWF0Y2ggPSB0ZXh0Lm1hdGNoKGludGVuc2l0eVJlZ2V4KTtcbiAgICAgIGlmIChpbnRlbnNpdHlNYXRjaCAmJiAhdXNlckluZm9bJ+qwleuPhCddKSB7XG4gICAgICAgIGNvbnN0IGludGVuc2l0eSA9IGludGVuc2l0eU1hdGNoWzBdO1xuICAgICAgICBpZiAoaW50ZW5zaXR5LmluY2x1ZGVzKCfqsIDrs40nKSB8fCBpbnRlbnNpdHkuaW5jbHVkZXMoJ+uCricpIHx8IGludGVuc2l0eS5pbmNsdWRlcygn7Im9JykgfHwgXG4gICAgICAgICAgICBpbnRlbnNpdHkuaW5jbHVkZXMoJ+2OuOyViCcpIHx8IGludGVuc2l0eS5pbmNsdWRlcygnZWFzeScpIHx8IGludGVuc2l0eS5pbmNsdWRlcygnbGlnaHQnKSkge1xuICAgICAgICAgIHVzZXJJbmZvWyfqsJXrj4QnXSA9ICfqsIDrsrzsm4AnO1xuICAgICAgICB9IGVsc2UgaWYgKGludGVuc2l0eS5pbmNsdWRlcygn7KSR6rCEJykgfHwgaW50ZW5zaXR5LmluY2x1ZGVzKCfrs7TthrUnKSB8fCBpbnRlbnNpdHkuaW5jbHVkZXMoJ21vZGVyYXRlJykpIHtcbiAgICAgICAgICB1c2VySW5mb1sn6rCV64+EJ10gPSAn7KSR6rCEJztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB1c2VySW5mb1sn6rCV64+EJ10gPSAn64aS7J2MJztcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgXG4gICAgICAvLyDrqqntkZwg66ek7LmtXG4gICAgICBjb25zdCBnb2FsTWF0Y2ggPSB0ZXh0Lm1hdGNoKGdvYWxSZWdleCk7XG4gICAgICBpZiAoZ29hbE1hdGNoICYmICF1c2VySW5mb1sn66qp7ZGcJ10pIHtcbiAgICAgICAgdXNlckluZm9bJ+uqqe2RnCddID0gZ29hbE1hdGNoWzBdO1xuICAgICAgfVxuICAgICAgXG4gICAgICAvLyDsg4gg6rOE7ZqNIOyalOyyrSDsl6zrtoAgKOychOygryDsgq3soJwv7J6s7IOd7ISxIOq0gOugqClcbiAgICAgIGlmICh0ZXh0LmluY2x1ZGVzKCfsg4jroZzsmrQnKSB8fCB0ZXh0LmluY2x1ZGVzKCfsg4gg6rOE7ZqNJykgfHwgdGV4dC5pbmNsdWRlcygn64uk7IucJykgfHwgXG4gICAgICAgICAgdGV4dC5pbmNsdWRlcygn67CU6r+UJykgfHwgdGV4dC5pbmNsdWRlcygn67OA6rK9JykgfHwgdGV4dC5pbmNsdWRlcygn7IKt7KCcJykgfHwgXG4gICAgICAgICAgdGV4dC5pbmNsdWRlcygn7KeA7JuMJykgfHwgdGV4dC5pbmNsdWRlcygn7JeG7JWgJykgfHwgdGV4dC5pbmNsdWRlcygn7Leo7IaMJykpIHtcbiAgICAgICAgdXNlckluZm9bJ+yDiCDqs4Ttmo0g7JqU7LKtJ10gPSAndHJ1ZSc7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIFxuICByZXR1cm4gdXNlckluZm87XG59ICJdLCJuYW1lcyI6WyJHb29nbGVHZW5lcmF0aXZlQUkiLCJydW5uaW5nQ29hY2hQcm9tcHQiLCJnZXRBaUNsaWVudCIsImFwaUtleSIsImtleSIsInByb2Nlc3MiLCJlbnYiLCJHRU1JTklfQVBJX0tFWSIsIkVycm9yIiwiZ2VuZXJhdGVSdW5uaW5nUGxhbiIsImNvbnZlcnNhdGlvbkhpc3RvcnkiLCJnZW5BSSIsIm1vZGVsIiwiZ2V0R2VuZXJhdGl2ZU1vZGVsIiwiZ2VuZXJhdGlvbkNvbmZpZyIsInRlbXBlcmF0dXJlIiwibWF4T3V0cHV0VG9rZW5zIiwic3lzdGVtUHJvbXB0IiwiY2hhdENvbnRleHQiLCJyZWNlbnRNZXNzYWdlcyIsInNsaWNlIiwibGVuZ3RoIiwiZm9yRWFjaCIsIm1zZyIsInJvbGUiLCJ0ZXh0IiwidXNlckluZm8iLCJleHRyYWN0VXNlckluZm9Gcm9tQ29udGV4dCIsIk9iamVjdCIsImtleXMiLCJlbnRyaWVzIiwidmFsdWUiLCJsYXN0VXNlck1lc3NhZ2UiLCJnZXRMYXN0VXNlck1lc3NhZ2UiLCJmdWxsUHJvbXB0IiwiY29uc29sZSIsImxvZyIsInJlc3VsdCIsImdlbmVyYXRlQ29udGVudCIsInJlc3BvbnNlIiwicGxhbkRhdGEiLCJqc29uTWF0Y2giLCJtYXRjaCIsIkpTT04iLCJwYXJzZSIsImVycm9yIiwic3RyaW5naWZ5IiwibW9ja1RleHQiLCJtb2NrQ2hhdFJlc3BvbnNlIiwibW9ja1BsYW5EYXRhIiwiY3JlYXRlTW9ja1BsYW5EYXRhIiwiaGlzdG9yeSIsImkiLCJtZXNzYWdlIiwiaGFzRXhwZXJpZW5jZSIsImhhc0Rpc3RhbmNlIiwiaGFzRGF0ZSIsImhhc0ludGVuc2l0eSIsImhhc1RpbWUiLCJoYXNGcmVxdWVuY3kiLCJoYXNHb2FsIiwid2FudHNOZXdQbGFuIiwibmV3UGxhblJlc3BvbnNlcyIsInJhbmRvbVNlbGVjdCIsImV4cGVyaWVuY2UiLCJkaXN0YW5jZSIsImRhdGUiLCJ0aW1lIiwiaW50ZW5zaXR5IiwiZW1vamlPcHRpb25zIiwiZW1vamkiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJwbGFuUmVzcG9uc2VzIiwiZGlzdGFuY2VSZXNwb25zZXMiLCJ0b0xvd2VyQ2FzZSIsImluY2x1ZGVzIiwiZ3JlZXRpbmdzIiwiZGVmYXVsdFJlc3BvbnNlcyIsInRhcmdldERpc3RhbmNlIiwiZnJlcXVlbmN5IiwiZ29hbCIsIm5vdyIsIkRhdGUiLCJmdXR1cmVEYXRlIiwic2V0RGF0ZSIsImdldERhdGUiLCJob3VyIiwibWludXRlIiwiZm9ybWF0dGVkRGF0ZSIsImdldEZ1bGxZZWFyIiwiZ2V0TW9udGgiLCJnZXRLb3JlYW5EYXlPZldlZWsiLCJkaXN0YW5jZU1hdGNoIiwicGFyc2VJbnQiLCJ0aXRsZSIsImR1cmF0aW9uIiwiZGV0YWlscyIsImRheXMiLCJnZXREYXkiLCJhcnIiLCJleHBlcmllbmNlUmVnZXgiLCJkaXN0YW5jZVJlZ2V4IiwiZnJlcXVlbmN5UmVnZXgiLCJ0aW1lUmVnZXgiLCJwYWNlUmVnZXgiLCJkYXRlUmVnZXgiLCJpbnRlbnNpdHlSZWdleCIsImdvYWxSZWdleCIsImV4cE1hdGNoIiwiZGlzdE1hdGNoIiwiZnJlcU1hdGNoIiwidGltZU1hdGNoIiwidW5pdCIsInBhY2VNYXRjaCIsImRhdGVNYXRjaCIsImludGVuc2l0eU1hdGNoIiwiZ29hbE1hdGNoIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./src/lib/aiClient.ts\n");

/***/ }),

/***/ "(api)/./src/lib/prompts.ts":
/*!****************************!*\
  !*** ./src/lib/prompts.ts ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   runningCoachPrompt: () => (/* binding */ runningCoachPrompt)\n/* harmony export */ });\n// 뉴런(newrun) 러닝 코치 AI의 시스템 프롬프트\nconst runningCoachPrompt = `당신은 뉴런(newrun)의 러닝 코치입니다. 친근하고 격려하는 말투로 사용자와 대화하세요. 반말보다는 존댓말을 사용하되, 너무 딱딱하지 않고 친근하게 대화해주세요.\n\n1. 응답은 짧고 간결하게 해주세요. 1-2문장이 이상적입니다.\n2. 마크다운 스타일은 사용하지 마세요. 일반 텍스트만 사용하세요.\n3. 사용자가 이전에 제공한 정보는 계속 기억하고 반복해서 물어보지 마세요.\n4. 😊, 👍, 👋 같은 이모지를 적절히 사용하여 친근한 분위기를 만드세요.\n5. 러닝 계획을 세우기 위해 다음 정보가 반드시 필요합니다:\n   - 목표 거리: \"5km\", \"10km\", \"하프 마라톤\" 등 (필수)\n   - 달리기 경험: \"초보자\", \"중급자\", \"고급자\" 등 (필수)\n   - 날짜와 시간: 언제 달릴 계획인지 (필수)\n   - 강도: \"가벼움\", \"중간\", \"높음\" 등 (필수)\n   - 목표 시간/페이스: \"30분 내\", \"킬로당 6분\" 등 (필수)\n   - 주간 빈도: 주 몇 회 달릴 수 있는지 (권장)\n   - 목표: 체중 감량, 건강 증진, 대회 준비 등 (권장)\n\n6. 위 필수 정보가 없으면 친근하게 물어보고, 모든 필수 정보가 수집되면 바로 러닝 계획을 제공하세요.\n7. 러닝 계획을 이미 제공했다면, 사용자가 새로운 계획을 원하는지 물어보세요. \"새로운 계획 세워드릴까요?\" 또는 \"다른 계획이 필요하신가요?\"라고 물어보세요.\n\n최종 러닝 계획이 완성되면 아래와 같은 형식으로 구조화된 정보를 JSON 형태로 응답 마지막에 반드시 포함시켜 주세요:\n\n\\`\\`\\`json\n{\n  \"title\": \"러닝 플랜 제목 (예: 초보자 5km 플랜)\",\n  \"date\": \"달리기 날짜와 시간 (예: 2023년 5월 13일 (토) 오전 7:00)\",\n  \"distance\": \"달리기 거리 (예: 5km)\",\n  \"duration\": \"예상 소요 시간 (예: 약 35분)\",\n  \"intensity\": \"강도 (예: 가벼움, 중간, 높음)\",\n  \"details\": \"세부 계획 (예: 준비운동 5분 → 본운동 25분 → 정리운동 5분)\"\n}\n\\`\\`\\`\n\n응답 예시:\n사용자: \"러닝 계획 세워줘\"\n코치: \"안녕하세요! 😊 뉴런 러닝 코치예요. 어떤 거리를 목표로 하시나요? 5km, 10km 등 알려주시면 맞춤 플랜을 만들어 드릴게요!\"\n\n사용자: \"5km 달리기 할거예요. 초보자인데\"\n코치: \"5km 초보자 플랜이군요! 👍 언제 달리실 계획인가요? 그리고 목표 시간이 있으신지도 알려주세요~\"\n\n사용자: \"내일 아침에 달릴 거예요. 40분 안에 완주하고 싶어요\"\n코치: \"좋은 목표예요! 내일 아침 5km를 40분 안에 완주하는 초보자 플랜을 준비했어요. 준비운동 5분 후 조깅과 걷기를 번갈아가며 하시면 좋을 것 같아요! 😊\"`;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvbGliL3Byb21wdHMudHMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBLGdDQUFnQztBQUN6QixNQUFNQSxxQkFBcUIsQ0FBQzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OzZGQXVDMEQsQ0FBQyxDQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcnVuLXBsYW5uZXIvLi9zcmMvbGliL3Byb21wdHMudHM/YTY2MyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyDribTrn7AobmV3cnVuKSDrn6zri50g7L2U7LmYIEFJ7J2YIOyLnOyKpO2FnCDtlITroaztlITtirhcbmV4cG9ydCBjb25zdCBydW5uaW5nQ29hY2hQcm9tcHQgPSBg64u57Iug7J2AIOuJtOufsChuZXdydW4p7J2YIOufrOuLnSDsvZTsuZjsnoXri4jri6QuIOy5nOq3vO2VmOqzoCDqsqnroKTtlZjripQg66eQ7Yis66GcIOyCrOyaqeyekOyZgCDrjIDtmZTtlZjshLjsmpQuIOuwmOunkOuztOuLpOuKlCDsobTrjJPrp5DsnYQg7IKs7Jqp7ZWY65CYLCDrhIjrrLQg65Sx65Sx7ZWY7KeAIOyViuqzoCDsuZzqt7ztlZjqsowg64yA7ZmU7ZW07KO87IS47JqULlxuXG4xLiDsnZHri7XsnYAg7Ken6rOgIOqwhOqysO2VmOqyjCDtlbTso7zshLjsmpQuIDEtMuusuOyepeydtCDsnbTsg4HsoIHsnoXri4jri6QuXG4yLiDrp4jtgazri6TsmrQg7Iqk7YOA7J287J2AIOyCrOyaqe2VmOyngCDrp4jshLjsmpQuIOydvOuwmCDthY3siqTtirjrp4wg7IKs7Jqp7ZWY7IS47JqULlxuMy4g7IKs7Jqp7J6Q6rCAIOydtOyghOyXkCDsoJzqs7XtlZwg7KCV67O064qUIOqzhOyGjSDquLDslrXtlZjqs6Ag67CY67O17ZW07IScIOusvOyWtOuztOyngCDrp4jshLjsmpQuXG40LiDwn5iKLCDwn5GNLCDwn5GLIOqwmeydgCDsnbTrqqjsp4Drpbwg7KCB7KCI7Z6IIOyCrOyaqe2VmOyXrCDsuZzqt7ztlZwg67aE7JyE6riw66W8IOunjOuTnOyEuOyalC5cbjUuIOufrOuLnSDqs4Ttmo3snYQg7IS47Jqw6riwIOychO2VtCDri6TsnYwg7KCV67O06rCAIOuwmOuTnOyLnCDtlYTsmpTtlanri4jri6Q6XG4gICAtIOuqqe2RnCDqsbDrpqw6IFwiNWttXCIsIFwiMTBrbVwiLCBcIu2VmO2UhCDrp4jrnbzthqRcIiDrk7EgKO2VhOyImClcbiAgIC0g64us66as6riwIOqyve2XmDogXCLstIjrs7TsnpBcIiwgXCLspJHquInsnpBcIiwgXCLqs6DquInsnpBcIiDrk7EgKO2VhOyImClcbiAgIC0g64Kg7Kec7JmAIOyLnOqwhDog7Ja47KCcIOuLrOumtCDqs4Ttmo3snbjsp4AgKO2VhOyImClcbiAgIC0g6rCV64+EOiBcIuqwgOuyvOybgFwiLCBcIuykkeqwhFwiLCBcIuuGkuydjFwiIOuTsSAo7ZWE7IiYKVxuICAgLSDrqqntkZwg7Iuc6rCEL+2OmOydtOyKpDogXCIzMOu2hCDrgrRcIiwgXCLtgqzroZzri7kgNuu2hFwiIOuTsSAo7ZWE7IiYKVxuICAgLSDso7zqsIQg67mI64+EOiDso7wg66qHIO2ajCDri6zrprQg7IiYIOyeiOuKlOyngCAo6raM7J6lKVxuICAgLSDrqqntkZw6IOyytOykkSDqsJDrn4ksIOqxtOqwlSDspp3sp4QsIOuMgO2ajCDspIDruYQg65OxICjqtozsnqUpXG5cbjYuIOychCDtlYTsiJgg7KCV67O06rCAIOyXhuycvOuptCDsuZzqt7ztlZjqsowg66y87Ja067O06rOgLCDrqqjrk6Ag7ZWE7IiYIOygleuztOqwgCDsiJjsp5HrkJjrqbQg67CU66GcIOufrOuLnSDqs4Ttmo3snYQg7KCc6rO17ZWY7IS47JqULlxuNy4g65+s64udIOqzhO2ajeydhCDsnbTrr7gg7KCc6rO17ZaI64uk66m0LCDsgqzsmqnsnpDqsIAg7IOI66Gc7Jq0IOqzhO2ajeydhCDsm5DtlZjripTsp4Ag66y87Ja067O07IS47JqULiBcIuyDiOuhnOyatCDqs4Ttmo0g7IS47JuM65Oc66a06rmM7JqUP1wiIOuYkOuKlCBcIuuLpOuluCDqs4Ttmo3snbQg7ZWE7JqU7ZWY7Iug6rCA7JqUP1wi65286rOgIOusvOyWtOuztOyEuOyalC5cblxu7LWc7KKFIOufrOuLnSDqs4Ttmo3snbQg7JmE7ISx65CY66m0IOyVhOuemOyZgCDqsJnsnYAg7ZiV7Iud7Jy866GcIOq1rOyhsO2ZlOuQnCDsoJXrs7TrpbwgSlNPTiDtmJXtg5zroZwg7J2R64u1IOuniOyngOunieyXkCDrsJjrk5zsi5wg7Y+s7ZWo7Iuc7LycIOyjvOyEuOyalDpcblxuXFxgXFxgXFxganNvblxue1xuICBcInRpdGxlXCI6IFwi65+s64udIO2UjOuenCDsoJzrqqkgKOyYiDog7LSI67O07J6QIDVrbSDtlIzrnpwpXCIsXG4gIFwiZGF0ZVwiOiBcIuuLrOumrOq4sCDrgqDsp5zsmYAg7Iuc6rCEICjsmIg6IDIwMjPrhYQgNeyblCAxM+ydvCAo7YagKSDsmKTsoIQgNzowMClcIixcbiAgXCJkaXN0YW5jZVwiOiBcIuuLrOumrOq4sCDqsbDrpqwgKOyYiDogNWttKVwiLFxuICBcImR1cmF0aW9uXCI6IFwi7JiI7IOBIOyGjOyalCDsi5zqsIQgKOyYiDog7JW9IDM167aEKVwiLFxuICBcImludGVuc2l0eVwiOiBcIuqwleuPhCAo7JiIOiDqsIDrsrzsm4AsIOykkeqwhCwg64aS7J2MKVwiLFxuICBcImRldGFpbHNcIjogXCLshLjrtoAg6rOE7ZqNICjsmIg6IOykgOu5hOyatOuPmSA167aEIOKGkiDrs7jsmrTrj5kgMjXrtoQg4oaSIOygleumrOyatOuPmSA167aEKVwiXG59XG5cXGBcXGBcXGBcblxu7J2R64u1IOyYiOyLnDpcbuyCrOyaqeyekDogXCLrn6zri50g6rOE7ZqNIOyEuOybjOykmFwiXG7svZTsuZg6IFwi7JWI64WV7ZWY7IS47JqUISDwn5iKIOuJtOufsCDrn6zri50g7L2U7LmY7JiI7JqULiDslrTrlqQg6rGw66as66W8IOuqqe2RnOuhnCDtlZjsi5zrgpjsmpQ/IDVrbSwgMTBrbSDrk7Eg7JWM66Ck7KO87Iuc66m0IOunnuy2pCDtlIzrnpzsnYQg66eM65Ok7Ja0IOuTnOumtOqyjOyalCFcIlxuXG7sgqzsmqnsnpA6IFwiNWttIOuLrOumrOq4sCDtlaDqsbDsmIjsmpQuIOy0iOuztOyekOyduOuNsFwiXG7svZTsuZg6IFwiNWttIOy0iOuztOyekCDtlIzrnpzsnbTqtbDsmpQhIPCfkY0g7Ja47KCcIOuLrOumrOyLpCDqs4Ttmo3snbjqsIDsmpQ/IOq3uOumrOqzoCDrqqntkZwg7Iuc6rCE7J20IOyeiOycvOyLoOyngOuPhCDslYzroKTso7zshLjsmpR+XCJcblxu7IKs7Jqp7J6QOiBcIuuCtOydvCDslYTsuajsl5Ag64us66a0IOqxsOyYiOyalC4gNDDrtoQg7JWI7JeQIOyZhOyjvO2VmOqzoCDsi7bslrTsmpRcIlxu7L2U7LmYOiBcIuyii+ydgCDrqqntkZzsmIjsmpQhIOuCtOydvCDslYTsuaggNWtt66W8IDQw67aEIOyViOyXkCDsmYTso7ztlZjripQg7LSI67O07J6QIO2UjOuenOydhCDspIDruYTtlojslrTsmpQuIOykgOu5hOyatOuPmSA167aEIO2bhCDsobDquYXqs7wg6rG36riw66W8IOuyiOqwiOyVhOqwgOupsCDtlZjsi5zrqbQg7KKL7J2EIOqygyDqsJnslYTsmpQhIPCfmIpcImA7ICJdLCJuYW1lcyI6WyJydW5uaW5nQ29hY2hQcm9tcHQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./src/lib/prompts.ts\n");

/***/ }),

/***/ "(api)/./src/pages/api/chat.ts":
/*!*******************************!*\
  !*** ./src/pages/api/chat.ts ***!
  \*******************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var _lib_aiClient__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/aiClient */ \"(api)/./src/lib/aiClient.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_lib_aiClient__WEBPACK_IMPORTED_MODULE_0__]);\n_lib_aiClient__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n// In-memory storage for conversation history (will be reset on server restart)\n// In a production app, you would store this in a database or session\nconst conversationHistories = {};\nasync function handler(req, res) {\n    if (req.method !== \"POST\") {\n        res.status(405).end();\n        return;\n    }\n    try {\n        const { message, sessionId } = req.body;\n        const apiKey = process.env.GEMINI_API_KEY || \"AIzaSyCbzJRQzIfbdVpLkHzZZ86WOAFlIqa1MeI\";\n        if (!message || typeof message !== \"string\") {\n            res.status(400).json({\n                text: \"메시지가 올바르지 않습니다.\",\n                id: Date.now().toString()\n            });\n            return;\n        }\n        if (!apiKey) {\n            res.status(400).json({\n                text: \"API 키가 필요합니다. 앱 설정을 확인해주세요.\",\n                id: Date.now().toString()\n            });\n            return;\n        }\n        // Create or get session history\n        const sid = sessionId || \"default\";\n        if (!conversationHistories[sid]) {\n            conversationHistories[sid] = [];\n        }\n        // 대화 히스토리가 너무 길어지지 않도록 최대 10개 메시지만 유지\n        if (conversationHistories[sid].length >= 20) {\n            // 처음 메시지는 시스템 프롬프트일 수 있으므로 유지\n            const firstMessage = conversationHistories[sid][0];\n            // 최근 9개 메시지만 유지\n            conversationHistories[sid] = [\n                firstMessage,\n                ...conversationHistories[sid].slice(-9)\n            ];\n        }\n        // Add user message to history\n        conversationHistories[sid].push({\n            role: \"user\",\n            text: message\n        });\n        // Call Gemini API\n        try {\n            console.log(`Calling Gemini API with session ${sid}, message: ${message.substring(0, 50)}...`);\n            // 항상 API 키를 전달\n            const response = await (0,_lib_aiClient__WEBPACK_IMPORTED_MODULE_0__.generateRunningPlan)(conversationHistories[sid], apiKey);\n            // Add AI response to history\n            conversationHistories[sid].push({\n                role: \"model\",\n                text: response.text\n            });\n            // Send response with plan data if available\n            res.status(200).json({\n                text: response.text,\n                id: Date.now().toString(),\n                planData: response.planData\n            });\n        } catch (apiError) {\n            console.error(\"Gemini API Error:\", apiError);\n            // 서버 로그를 위한 에러 정보\n            if (apiError instanceof Error) {\n                console.error(`Error message: ${apiError.message}`);\n                console.error(`Error stack: ${apiError.stack}`);\n            }\n            // Fallback to mock response if API fails\n            const mockResponse = mockChatResponse(message);\n            // Add mock response to history\n            conversationHistories[sid].push({\n                role: \"model\",\n                text: mockResponse\n            });\n            // 모의 플랜 데이터 생성\n            const mockPlanData = createMockPlanData(message);\n            res.status(200).json({\n                text: mockResponse,\n                id: Date.now().toString(),\n                planData: mockPlanData\n            });\n        }\n    } catch (error) {\n        console.error(\"Chat API Error:\", error);\n        res.status(500).json({\n            text: \"서버 오류가 발생했습니다. 잠시 후 다시 시도해주세요.\",\n            id: Date.now().toString()\n        });\n    }\n}\n// Fallback mock response (used when Gemini API fails or for testing)\nconst mockChatResponse = (message)=>{\n    // 더 구체적인 응답 패턴\n    if (message.toLowerCase().includes(\"안녕\") || message.toLowerCase().includes(\"hi\") || message.toLowerCase().includes(\"hello\")) {\n        return \"안녕하세요! 저는 러닝 코치입니다. 오늘은 어떤 러닝 계획을 도와드릴까요? 평소 달리기 경험이나 목표 거리가 있으신가요?\";\n    }\n    if (message.toLowerCase().includes(\"처음\") || message.toLowerCase().includes(\"초보\") || message.toLowerCase().includes(\"beginner\")) {\n        return \"처음 달리기를 시작하시는군요! 좋습니다. 초보자에게는 걷기와 달리기를 번갈아가며 시작하는 방법을 추천해 드려요. 예를 들어 2분 걷고 1분 달리기를 반복하는 방식으로 20-30분간 운동하는 것이 좋습니다. 점차 달리는 시간을 늘려가세요. 운동화는 편안한 것으로 선택하시고, 무리하지 않는 것이 중요합니다. 특정 프로그램을 원하시나요?\";\n    }\n    if (message.toLowerCase().includes(\"5k\") || message.toLowerCase().includes(\"5km\") || message.includes(\"5\") && message.includes(\"km\")) {\n        return \"5km 러닝을 준비하고 계시군요! 좋은 목표입니다. 처음 5km에 도전하신다면, 4-6주 정도의 훈련 계획이 필요합니다. 주 3-4회, 각 30-40분씩 훈련하는 것이 좋으며, 처음에는 걷기와 달리기를 번갈아가면서 점차 달리는 시간을 늘려가는 것이 좋습니다. 구체적인 주간 계획을 세워드릴까요?\";\n    }\n    if (message.toLowerCase().includes(\"10k\") || message.toLowerCase().includes(\"10km\") || message.includes(\"10\") && message.includes(\"km\")) {\n        return \"10km 러닝을 계획하고 계시는군요! 훌륭합니다. 10km 훈련은 기초 체력이 중요합니다. 이미 5km를 완주할 수 있다면, 8-10주간의 훈련으로 10km에 도전할 수 있습니다. 주 4회 훈련을 권장하며, 긴 거리 달리기 1회(점진적으로 6km→8km→10km로 늘림), 짧은 인터벌 훈련 1회, 가벼운 조깅 2회로 구성하는 것이 효과적입니다. 어떤 현재 러닝 경험이 있으신가요?\";\n    }\n    if (message.toLowerCase().includes(\"마라톤\") || message.toLowerCase().includes(\"marathon\") || message.toLowerCase().includes(\"42km\")) {\n        return \"마라톤 도전을 고려하고 계시는군요! 마라톤은 체계적인 훈련이 필요합니다. 하프 마라톤을 완주한 경험이 있다면, 16-20주 훈련 프로그램을 추천드립니다. 주요 훈련은 긴 거리 달리기(최대 32-35km까지), 템포 런, 인터벌 훈련으로 구성됩니다. 주 4-5회 훈련하며, 회복과 영양 관리도 중요합니다. 현재 달리기 경험과 목표 완주 시간이 있으신가요?\";\n    }\n    if (message.toLowerCase().includes(\"부상\") || message.toLowerCase().includes(\"injury\") || message.toLowerCase().includes(\"아파\")) {\n        return \"부상 관리는 러닝에서 매우 중요합니다. 통증이 있다면 우선 충분한 휴식을 취하세요. RICE(Rest, Ice, Compression, Elevation) 요법을 적용하고, 심한 통증이 지속되면 전문의 상담을 권장합니다. 부상 후 러닝 복귀는 천천히 진행해야 합니다. 초기에는 거리와 강도를 50% 정도로 줄이고, 2주에 걸쳐 점진적으로 늘려가세요. 구체적으로 어떤 부위에 통증이 있으신가요?\";\n    }\n    if (message.toLowerCase().includes(\"페이스\") || message.toLowerCase().includes(\"pace\") || message.toLowerCase().includes(\"속도\")) {\n        return \"적절한 러닝 페이스는 목표와 경험에 따라 다릅니다. 초보자는 대화가 가능한 정도의 편안한 페이스(약 6:30-7:30/km)로 달리는 것이 좋습니다. 5km 목표가 있다면 약 6:00/km, 10km는 6:15/km, 하프 마라톤은 6:30/km, 풀 마라톤은 6:45/km 정도가 초보-중급자의 평균적인 페이스입니다. 주 훈련의 80%는 편안한 페이스로, 20%는 더 빠른 페이스로 진행하는 것이 효과적입니다. 현재 어느 정도의 페이스로 달리고 계신가요?\";\n    }\n    if (message.toLowerCase().includes(\"식단\") || message.toLowerCase().includes(\"영양\") || message.toLowerCase().includes(\"nutrition\") || message.toLowerCase().includes(\"diet\")) {\n        return \"러너를 위한 영양 관리는 중요합니다. 탄수화물(전체 칼로리의 50-60%), 단백질(15-20%), 건강한 지방(20-30%)의 균형 잡힌 식단이 좋습니다. 장거리 달리기 전에는 탄수화물 비중을 높이고, 달리기 30-60분 전에 가볍게 탄수화물 위주로 섭취하세요. 달리기 후에는 30분 이내에 단백질과 탄수화물을 함께 섭취하는 것이 회복에 도움이 됩니다. 수분 섭취도 매우 중요합니다. 특별히 궁금한 부분이 있으신가요?\";\n    }\n    if (message.toLowerCase().includes(\"장비\") || message.toLowerCase().includes(\"신발\") || message.toLowerCase().includes(\"shoes\") || message.toLowerCase().includes(\"gear\")) {\n        return \"좋은 러닝 장비는 경험을 크게 향상시킵니다. 가장 중요한 것은 자신의 발 형태와 러닝 스타일에 맞는 러닝화입니다. 전문 러닝 매장에서 발 분석(gait analysis)을 받아보는 것을 추천합니다. 기능성 의류는 땀 배출이 잘 되는 소재가 좋으며, 계절에 맞는 레이어링이 중요합니다. 또한 장거리 러닝 시에는 수분과 영양 보충을 위한 벨트나 수분 팩도 고려해보세요. 어떤 종류의 장비에 관심이 있으신가요?\";\n    }\n    // 일반적인 러닝 관련 질문\n    if (message.toLowerCase().includes(\"러닝\") || message.toLowerCase().includes(\"달리기\") || message.toLowerCase().includes(\"running\") || message.toLowerCase().includes(\"jogging\")) {\n        return \"러닝은 신체적, 정신적 건강에 매우 좋은 운동입니다. 좋은 러닝 계획을 세우기 위해서는 현재 체력 수준, 목표, 가용 시간을 고려해야 합니다. 초보자라면 주 3회, 각 20-30분부터 시작하여 점진적으로 늘려가는 것이 좋습니다. 정기적인 러닝은 심폐 기능 강화, 스트레스 감소, 수면 개선 등의 효과가 있습니다. 구체적인 목표나 질문이 있으시면 말씀해주세요.\";\n    }\n    if (message.toLowerCase().includes(\"계획\") || message.toLowerCase().includes(\"플랜\") || message.toLowerCase().includes(\"plan\") || message.toLowerCase().includes(\"schedule\")) {\n        return \"효과적인 러닝 계획은 목표, 현재 체력 수준, 그리고 생활 패턴을 고려해야 합니다. 초보자는 주 3-4회, 중급자는 4-5회, 고급자는 5-6회 훈련이 적절합니다. 훈련의 종류도 다양화하는 것이 좋습니다: 긴 거리 달리기(총 거리의 30-40%), 회복 달리기, 속도 훈련(인터벌, 템포 런)을 포함시키세요. 또한 최소 1-2일의 휴식일을 반드시 포함해야 합니다. 어떤 수준의 러닝 계획이 필요하신가요?\";\n    }\n    // 기본 응답\n    return \"러닝 계획에 대해 도움이 필요하시군요. 현재 달리기 경험, 목표 거리, 목표 시간 등을 알려주시면 더 구체적인 계획을 세워드릴 수 있습니다. 평소 운동 빈도나 건강 상태에 대해서도 알려주시면 도움이 됩니다. 어떤 부분에 관심이 있으신가요?\";\n};\n// 모의 플랜 데이터 생성 함수\nfunction createMockPlanData(message) {\n    const now = new Date();\n    const formattedDate = `${now.getFullYear()}년 ${now.getMonth() + 1}월 ${now.getDate()}일 (${getKoreanDayOfWeek(now)}) 오전 7:00`;\n    // 5km 러닝 플랜\n    if (message.toLowerCase().includes(\"5k\") || message.toLowerCase().includes(\"5km\") || message.includes(\"5\") && message.includes(\"km\")) {\n        return {\n            title: \"초보자를 위한 5K 러닝 플랜\",\n            date: formattedDate,\n            distance: \"5 km\",\n            duration: \"약 35분\",\n            intensity: \"가벼움 - 중간\",\n            details: \"준비운동 5분 → 5분 조깅/1분 걷기 반복(총 25분) → 정리운동 5분\"\n        };\n    }\n    // 10km 러닝 플랜\n    if (message.toLowerCase().includes(\"10k\") || message.toLowerCase().includes(\"10km\") || message.includes(\"10\") && message.includes(\"km\")) {\n        return {\n            title: \"중급자를 위한 10K 러닝 플랜\",\n            date: formattedDate,\n            distance: \"10 km\",\n            duration: \"약 1시간\",\n            intensity: \"중간\",\n            details: \"준비운동 10분 → 5:30-6:00/km 페이스로 10km 달리기 → 정리운동 5분\"\n        };\n    }\n    // 기본 주말 러닝 플랜\n    return {\n        title: \"주말 러닝 플랜\",\n        date: formattedDate,\n        distance: \"7 km\",\n        duration: \"약 45분\",\n        intensity: \"중간\",\n        details: \"준비운동 8분 → 6:00/km 페이스로 편안하게 7km 달리기 → 정리운동 7분\"\n    };\n}\n// 한국어 요일 변환 함수\nfunction getKoreanDayOfWeek(date) {\n    const days = [\n        \"일\",\n        \"월\",\n        \"화\",\n        \"수\",\n        \"목\",\n        \"금\",\n        \"토\"\n    ];\n    return days[date.getDay()];\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUNGO0lBRUEsY0FBYztJQUNkLE9BQU87UUFDTEwsT0FBTztRQUNQQyxNQUFNTjtRQUNOTyxVQUFVO1FBQ1ZDLFVBQVU7UUFDVkMsV0FBVztRQUNYQyxTQUFTO0lBQ1g7QUFDRjtBQUVBLGVBQWU7QUFDZixTQUFTTixtQkFBbUJFLElBQVU7SUFDcEMsTUFBTUssT0FBTztRQUFDO1FBQUs7UUFBSztRQUFLO1FBQUs7UUFBSztRQUFLO0tBQUk7SUFDaEQsT0FBT0EsSUFBSSxDQUFDTCxLQUFLTSxNQUFNLEdBQUc7QUFDNUIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ydW4tcGxhbm5lci8uL3NyYy9wYWdlcy9hcGkvY2hhdC50cz83Mjk4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB0eXBlIHsgTmV4dEFwaVJlcXVlc3QsIE5leHRBcGlSZXNwb25zZSB9IGZyb20gJ25leHQnO1xuaW1wb3J0IHsgZ2VuZXJhdGVSdW5uaW5nUGxhbiB9IGZyb20gJ0AvbGliL2FpQ2xpZW50JztcblxudHlwZSBDaGF0UmVzcG9uc2UgPSB7XG4gIHRleHQ6IHN0cmluZztcbiAgaWQ6IHN0cmluZztcbiAgcGxhbkRhdGE/OiBhbnk7IC8vIFJ1blBsYW4gZGF0YSB3aGVuIGF2YWlsYWJsZVxufTtcblxuLy8gSW4tbWVtb3J5IHN0b3JhZ2UgZm9yIGNvbnZlcnNhdGlvbiBoaXN0b3J5ICh3aWxsIGJlIHJlc2V0IG9uIHNlcnZlciByZXN0YXJ0KVxuLy8gSW4gYSBwcm9kdWN0aW9uIGFwcCwgeW91IHdvdWxkIHN0b3JlIHRoaXMgaW4gYSBkYXRhYmFzZSBvciBzZXNzaW9uXG5jb25zdCBjb252ZXJzYXRpb25IaXN0b3JpZXM6IFJlY29yZDxzdHJpbmcsIHsgcm9sZTogJ3VzZXInIHwgJ21vZGVsJzsgdGV4dDogc3RyaW5nIH1bXT4gPSB7fTtcblxuZXhwb3J0IGRlZmF1bHQgYXN5bmMgZnVuY3Rpb24gaGFuZGxlcihcbiAgcmVxOiBOZXh0QXBpUmVxdWVzdCxcbiAgcmVzOiBOZXh0QXBpUmVzcG9uc2U8Q2hhdFJlc3BvbnNlPlxuKSB7XG4gIGlmIChyZXEubWV0aG9kICE9PSAnUE9TVCcpIHtcbiAgICByZXMuc3RhdHVzKDQwNSkuZW5kKCk7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgdHJ5IHtcbiAgICBjb25zdCB7IG1lc3NhZ2UsIHNlc3Npb25JZCB9ID0gcmVxLmJvZHk7XG4gICAgY29uc3QgYXBpS2V5ID0gcHJvY2Vzcy5lbnYuR0VNSU5JX0FQSV9LRVkgfHwgcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfR0VNSU5JX0FQSV9LRVk7XG4gICAgXG4gICAgaWYgKCFtZXNzYWdlIHx8IHR5cGVvZiBtZXNzYWdlICE9PSAnc3RyaW5nJykge1xuICAgICAgcmVzLnN0YXR1cyg0MDApLmpzb24oeyBcbiAgICAgICAgdGV4dDogJ+uplOyLnOyngOqwgCDsmKzrsJTrpbTsp4Ag7JWK7Iq164uI64ukLicsIFxuICAgICAgICBpZDogRGF0ZS5ub3coKS50b1N0cmluZygpIFxuICAgICAgfSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIFxuICAgIGlmICghYXBpS2V5KSB7XG4gICAgICByZXMuc3RhdHVzKDQwMCkuanNvbih7IFxuICAgICAgICB0ZXh0OiAnQVBJIO2CpOqwgCDtlYTsmpTtlanri4jri6QuIOyVsSDshKTsoJXsnYQg7ZmV7J247ZW07KO87IS47JqULicsIFxuICAgICAgICBpZDogRGF0ZS5ub3coKS50b1N0cmluZygpIFxuICAgICAgfSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIFxuICAgIC8vIENyZWF0ZSBvciBnZXQgc2Vzc2lvbiBoaXN0b3J5XG4gICAgY29uc3Qgc2lkID0gc2Vzc2lvbklkIHx8ICdkZWZhdWx0JztcbiAgICBpZiAoIWNvbnZlcnNhdGlvbkhpc3Rvcmllc1tzaWRdKSB7XG4gICAgICBjb252ZXJzYXRpb25IaXN0b3JpZXNbc2lkXSA9IFtdO1xuICAgIH1cbiAgICBcbiAgICAvLyDrjIDtmZQg7Z6I7Iqk7Yag66as6rCAIOuEiOustCDquLjslrTsp4Dsp4Ag7JWK64+E66GdIOy1nOuMgCAxMOqwnCDrqZTsi5zsp4Drp4wg7Jyg7KeAXG4gICAgaWYgKGNvbnZlcnNhdGlvbkhpc3Rvcmllc1tzaWRdLmxlbmd0aCA+PSAyMCkge1xuICAgICAgLy8g7LKY7J2MIOuplOyLnOyngOuKlCDsi5zsiqTthZwg7ZSE66Gs7ZSE7Yq47J28IOyImCDsnojsnLzrr4DroZwg7Jyg7KeAXG4gICAgICBjb25zdCBmaXJzdE1lc3NhZ2UgPSBjb252ZXJzYXRpb25IaXN0b3JpZXNbc2lkXVswXTtcbiAgICAgIC8vIOy1nOq3vCA56rCcIOuplOyLnOyngOunjCDsnKDsp4BcbiAgICAgIGNvbnZlcnNhdGlvbkhpc3Rvcmllc1tzaWRdID0gW1xuICAgICAgICBmaXJzdE1lc3NhZ2UsXG4gICAgICAgIC4uLmNvbnZlcnNhdGlvbkhpc3Rvcmllc1tzaWRdLnNsaWNlKC05KVxuICAgICAgXTtcbiAgICB9XG4gICAgXG4gICAgLy8gQWRkIHVzZXIgbWVzc2FnZSB0byBoaXN0b3J5XG4gICAgY29udmVyc2F0aW9uSGlzdG9yaWVzW3NpZF0ucHVzaCh7XG4gICAgICByb2xlOiAndXNlcicsXG4gICAgICB0ZXh0OiBtZXNzYWdlXG4gICAgfSk7XG4gICAgXG4gICAgLy8gQ2FsbCBHZW1pbmkgQVBJXG4gICAgdHJ5IHtcbiAgICAgIGNvbnNvbGUubG9nKGBDYWxsaW5nIEdlbWluaSBBUEkgd2l0aCBzZXNzaW9uICR7c2lkfSwgbWVzc2FnZTogJHttZXNzYWdlLnN1YnN0cmluZygwLCA1MCl9Li4uYCk7XG4gICAgICBcbiAgICAgIC8vIO2VreyDgSBBUEkg7YKk66W8IOyghOuLrFxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBnZW5lcmF0ZVJ1bm5pbmdQbGFuKGNvbnZlcnNhdGlvbkhpc3Rvcmllc1tzaWRdLCBhcGlLZXkpO1xuICAgICAgXG4gICAgICAvLyBBZGQgQUkgcmVzcG9uc2UgdG8gaGlzdG9yeVxuICAgICAgY29udmVyc2F0aW9uSGlzdG9yaWVzW3NpZF0ucHVzaCh7XG4gICAgICAgIHJvbGU6ICdtb2RlbCcsXG4gICAgICAgIHRleHQ6IHJlc3BvbnNlLnRleHRcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICAvLyBTZW5kIHJlc3BvbnNlIHdpdGggcGxhbiBkYXRhIGlmIGF2YWlsYWJsZVxuICAgICAgcmVzLnN0YXR1cygyMDApLmpzb24oe1xuICAgICAgICB0ZXh0OiByZXNwb25zZS50ZXh0LFxuICAgICAgICBpZDogRGF0ZS5ub3coKS50b1N0cmluZygpLFxuICAgICAgICBwbGFuRGF0YTogcmVzcG9uc2UucGxhbkRhdGFcbiAgICAgIH0pO1xuICAgIH0gY2F0Y2ggKGFwaUVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdHZW1pbmkgQVBJIEVycm9yOicsIGFwaUVycm9yKTtcbiAgICAgIFxuICAgICAgLy8g7ISc67KEIOuhnOq3uOulvCDsnITtlZwg7JeQ65+sIOygleuztFxuICAgICAgaWYgKGFwaUVycm9yIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihgRXJyb3IgbWVzc2FnZTogJHthcGlFcnJvci5tZXNzYWdlfWApO1xuICAgICAgICBjb25zb2xlLmVycm9yKGBFcnJvciBzdGFjazogJHthcGlFcnJvci5zdGFja31gKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gRmFsbGJhY2sgdG8gbW9jayByZXNwb25zZSBpZiBBUEkgZmFpbHNcbiAgICAgIGNvbnN0IG1vY2tSZXNwb25zZSA9IG1vY2tDaGF0UmVzcG9uc2UobWVzc2FnZSk7XG4gICAgICBcbiAgICAgIC8vIEFkZCBtb2NrIHJlc3BvbnNlIHRvIGhpc3RvcnlcbiAgICAgIGNvbnZlcnNhdGlvbkhpc3Rvcmllc1tzaWRdLnB1c2goe1xuICAgICAgICByb2xlOiAnbW9kZWwnLFxuICAgICAgICB0ZXh0OiBtb2NrUmVzcG9uc2VcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICAvLyDrqqjsnZgg7ZSM656cIOuNsOydtO2EsCDsg53shLFcbiAgICAgIGNvbnN0IG1vY2tQbGFuRGF0YSA9IGNyZWF0ZU1vY2tQbGFuRGF0YShtZXNzYWdlKTtcbiAgICAgIFxuICAgICAgcmVzLnN0YXR1cygyMDApLmpzb24oe1xuICAgICAgICB0ZXh0OiBtb2NrUmVzcG9uc2UsXG4gICAgICAgIGlkOiBEYXRlLm5vdygpLnRvU3RyaW5nKCksXG4gICAgICAgIHBsYW5EYXRhOiBtb2NrUGxhbkRhdGFcbiAgICAgIH0pO1xuICAgIH1cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdDaGF0IEFQSSBFcnJvcjonLCBlcnJvcik7XG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBcbiAgICAgIHRleHQ6ICfshJzrsoQg7Jik66WY6rCAIOuwnOyDne2WiOyKteuLiOuLpC4g7J6g7IucIO2bhCDri6Tsi5wg7Iuc64+E7ZW07KO87IS47JqULicsIFxuICAgICAgaWQ6IERhdGUubm93KCkudG9TdHJpbmcoKSBcbiAgICB9KTtcbiAgfVxufVxuXG4vLyBGYWxsYmFjayBtb2NrIHJlc3BvbnNlICh1c2VkIHdoZW4gR2VtaW5pIEFQSSBmYWlscyBvciBmb3IgdGVzdGluZylcbmNvbnN0IG1vY2tDaGF0UmVzcG9uc2UgPSAobWVzc2FnZTogc3RyaW5nKSA9PiB7XG4gIC8vIOuNlCDqtazssrTsoIHsnbgg7J2R64u1IO2MqO2EtFxuICBpZiAobWVzc2FnZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCfslYjrhZUnKSB8fCBtZXNzYWdlLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ2hpJykgfHwgbWVzc2FnZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCdoZWxsbycpKSB7XG4gICAgcmV0dXJuICfslYjrhZXtlZjshLjsmpQhIOyggOuKlCDrn6zri50g7L2U7LmY7J6F64uI64ukLiDsmKTripjsnYAg7Ja065akIOufrOuLnSDqs4Ttmo3snYQg64+E7JmA65Oc66a06rmM7JqUPyDtj4nshowg64us66as6riwIOqyve2XmOydtOuCmCDrqqntkZwg6rGw66as6rCAIOyeiOycvOyLoOqwgOyalD8nO1xuICB9XG4gIFxuICBpZiAobWVzc2FnZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCfsspjsnYwnKSB8fCBtZXNzYWdlLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ+y0iOuztCcpIHx8IG1lc3NhZ2UudG9Mb3dlckNhc2UoKS5pbmNsdWRlcygnYmVnaW5uZXInKSkge1xuICAgIHJldHVybiAn7LKY7J2MIOuLrOumrOq4sOulvCDsi5zsnpHtlZjsi5zripTqtbDsmpQhIOyii+yKteuLiOuLpC4g7LSI67O07J6Q7JeQ6rKM64qUIOqxt+q4sOyZgCDri6zrpqzquLDrpbwg67KI6rCI7JWE6rCA66mwIOyLnOyeke2VmOuKlCDrsKnrspXsnYQg7LaU7LKc7ZW0IOuTnOugpOyalC4g7JiI66W8IOuTpOyWtCAy67aEIOqxt+qzoCAx67aEIOuLrOumrOq4sOulvCDrsJjrs7XtlZjripQg67Cp7Iud7Jy866GcIDIwLTMw67aE6rCEIOyatOuPme2VmOuKlCDqsoPsnbQg7KKL7Iq164uI64ukLiDsoJDssKgg64us66as64qUIOyLnOqwhOydhCDripjroKTqsIDshLjsmpQuIOyatOuPme2ZlOuKlCDtjrjslYjtlZwg6rKD7Jy866GcIOyEoO2Dne2VmOyLnOqzoCwg66y066as7ZWY7KeAIOyViuuKlCDqsoPsnbQg7KSR7JqU7ZWp64uI64ukLiDtirnsoJUg7ZSE66Gc6re4656o7J2EIOybkO2VmOyLnOuCmOyalD8nO1xuICB9XG4gIFxuICBpZiAobWVzc2FnZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCc1aycpIHx8IG1lc3NhZ2UudG9Mb3dlckNhc2UoKS5pbmNsdWRlcygnNWttJykgfHwgKG1lc3NhZ2UuaW5jbHVkZXMoJzUnKSAmJiBtZXNzYWdlLmluY2x1ZGVzKCdrbScpKSkge1xuICAgIHJldHVybiAnNWttIOufrOuLneydhCDspIDruYTtlZjqs6Ag6rOE7Iuc6rWw7JqUISDsoovsnYAg66qp7ZGc7J6F64uI64ukLiDsspjsnYwgNWtt7JeQIOuPhOyghO2VmOyLoOuLpOuptCwgNC027KO8IOygleuPhOydmCDtm4jroKgg6rOE7ZqN7J20IO2VhOyalO2VqeuLiOuLpC4g7KO8IDMtNO2ajCwg6rCBIDMwLTQw67aE7JSpIO2biOugqO2VmOuKlCDqsoPsnbQg7KKL7Jy866mwLCDsspjsnYzsl5DripQg6rG36riw7JmAIOuLrOumrOq4sOulvCDrsojqsIjslYTqsIDrqbTshJwg7KCQ7LCoIOuLrOumrOuKlCDsi5zqsITsnYQg64qY66Ck6rCA64qUIOqyg+ydtCDsoovsirXri4jri6QuIOq1rOyytOyggeyduCDso7zqsIQg6rOE7ZqN7J2EIOyEuOybjOuTnOumtOq5jOyalD8nO1xuICB9XG4gIFxuICBpZiAobWVzc2FnZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCcxMGsnKSB8fCBtZXNzYWdlLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJzEwa20nKSB8fCAobWVzc2FnZS5pbmNsdWRlcygnMTAnKSAmJiBtZXNzYWdlLmluY2x1ZGVzKCdrbScpKSkge1xuICAgIHJldHVybiAnMTBrbSDrn6zri53snYQg6rOE7ZqN7ZWY6rOgIOqzhOyLnOuKlOq1sOyalCEg7ZuM66Wt7ZWp64uI64ukLiAxMGttIO2biOugqOydgCDquLDstIgg7LK066Cl7J20IOykkeyalO2VqeuLiOuLpC4g7J2066+4IDVrbeulvCDsmYTso7ztlaAg7IiYIOyeiOuLpOuptCwgOC0xMOyjvOqwhOydmCDtm4jroKjsnLzroZwgMTBrbeyXkCDrj4TsoITtlaAg7IiYIOyeiOyKteuLiOuLpC4g7KO8IDTtmowg7ZuI66Co7J2EIOq2jOyepe2VmOupsCwg6ri0IOqxsOumrCDri6zrpqzquLAgMe2ajCjsoJDsp4TsoIHsnLzroZwgNmtt4oaSOGtt4oaSMTBrbeuhnCDripjrprwpLCDsp6fsnYAg7J247YSw67KMIO2biOugqCAx7ZqMLCDqsIDrsrzsmrQg7KGw6rmFIDLtmozroZwg6rWs7ISx7ZWY64qUIOqyg+ydtCDtmqjqs7zsoIHsnoXri4jri6QuIOyWtOuWpCDtmITsnqwg65+s64udIOqyve2XmOydtCDsnojsnLzsi6DqsIDsmpQ/JztcbiAgfVxuICBcbiAgaWYgKG1lc3NhZ2UudG9Mb3dlckNhc2UoKS5pbmNsdWRlcygn66eI65287YakJykgfHwgbWVzc2FnZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCdtYXJhdGhvbicpIHx8IG1lc3NhZ2UudG9Mb3dlckNhc2UoKS5pbmNsdWRlcygnNDJrbScpKSB7XG4gICAgcmV0dXJuICfrp4jrnbzthqQg64+E7KCE7J2EIOqzoOugpO2VmOqzoCDqs4Tsi5zripTqtbDsmpQhIOuniOudvO2GpOydgCDssrTqs4TsoIHsnbgg7ZuI66Co7J20IO2VhOyalO2VqeuLiOuLpC4g7ZWY7ZSEIOuniOudvO2GpOydhCDsmYTso7ztlZwg6rK97ZeY7J20IOyeiOuLpOuptCwgMTYtMjDso7wg7ZuI66CoIO2UhOuhnOq3uOueqOydhCDstpTsspzrk5zrpr3ri4jri6QuIOyjvOyalCDtm4jroKjsnYAg6ri0IOqxsOumrCDri6zrpqzquLAo7LWc64yAIDMyLTM1a23quYzsp4ApLCDthZztj6wg65+wLCDsnbjthLDrsowg7ZuI66Co7Jy866GcIOq1rOyEseuQqeuLiOuLpC4g7KO8IDQtNe2ajCDtm4jroKjtlZjrqbAsIO2ajOuzteqzvCDsmIHslpEg6rSA66as64+EIOykkeyalO2VqeuLiOuLpC4g7ZiE7J6sIOuLrOumrOq4sCDqsr3tl5jqs7wg66qp7ZGcIOyZhOyjvCDsi5zqsITsnbQg7J6I7Jy87Iug6rCA7JqUPyc7XG4gIH1cbiAgXG4gIGlmIChtZXNzYWdlLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ+u2gOyDgScpIHx8IG1lc3NhZ2UudG9Mb3dlckNhc2UoKS5pbmNsdWRlcygnaW5qdXJ5JykgfHwgbWVzc2FnZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCfslYTtjIwnKSkge1xuICAgIHJldHVybiAn67aA7IOBIOq0gOumrOuKlCDrn6zri53sl5DshJwg66ek7JqwIOykkeyalO2VqeuLiOuLpC4g7Ya17Kad7J20IOyeiOuLpOuptCDsmrDshKAg7Lap67aE7ZWcIO2ctOyLneydhCDst6jtlZjshLjsmpQuIFJJQ0UoUmVzdCwgSWNlLCBDb21wcmVzc2lvbiwgRWxldmF0aW9uKSDsmpTrspXsnYQg7KCB7Jqp7ZWY6rOgLCDsi6ztlZwg7Ya17Kad7J20IOyngOyGjeuQmOuptCDsoITrrLjsnZgg7IOB64u07J2EIOq2jOyepe2VqeuLiOuLpC4g67aA7IOBIO2bhCDrn6zri50g67O16reA64qUIOyynOyynO2eiCDsp4TtlontlbTslbwg7ZWp64uI64ukLiDstIjquLDsl5DripQg6rGw66as7JmAIOqwleuPhOulvCA1MCUg7KCV64+E66GcIOykhOydtOqzoCwgMuyjvOyXkCDqsbjss5Ag7KCQ7KeE7KCB7Jy866GcIOuKmOugpOqwgOyEuOyalC4g6rWs7LK07KCB7Jy866GcIOyWtOuWpCDrtoDsnITsl5Ag7Ya17Kad7J20IOyeiOycvOyLoOqwgOyalD8nO1xuICB9XG4gIFxuICBpZiAobWVzc2FnZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCftjpjsnbTsiqQnKSB8fCBtZXNzYWdlLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ3BhY2UnKSB8fCBtZXNzYWdlLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ+yGjeuPhCcpKSB7XG4gICAgcmV0dXJuICfsoIHsoIjtlZwg65+s64udIO2OmOydtOyKpOuKlCDrqqntkZzsmYAg6rK97ZeY7JeQIOuUsOudvCDri6TrpoXri4jri6QuIOy0iOuztOyekOuKlCDrjIDtmZTqsIAg6rCA64ql7ZWcIOygleuPhOydmCDtjrjslYjtlZwg7Y6Y7J207IqkKOyVvSA2OjMwLTc6MzAva20p66GcIOuLrOumrOuKlCDqsoPsnbQg7KKL7Iq164uI64ukLiA1a20g66qp7ZGc6rCAIOyeiOuLpOuptCDslb0gNjowMC9rbSwgMTBrbeuKlCA2OjE1L2ttLCDtlZjtlIQg66eI65287Yak7J2AIDY6MzAva20sIO2SgCDrp4jrnbzthqTsnYAgNjo0NS9rbSDsoJXrj4TqsIAg7LSI67O0Leykkeq4ieyekOydmCDtj4nqt6DsoIHsnbgg7Y6Y7J207Iqk7J6F64uI64ukLiDso7wg7ZuI66Co7J2YIDgwJeuKlCDtjrjslYjtlZwg7Y6Y7J207Iqk66GcLCAyMCXripQg642UIOu5oOuluCDtjpjsnbTsiqTroZwg7KeE7ZaJ7ZWY64qUIOqyg+ydtCDtmqjqs7zsoIHsnoXri4jri6QuIO2YhOyerCDslrTripAg7KCV64+E7J2YIO2OmOydtOyKpOuhnCDri6zrpqzqs6Ag6rOE7Iug6rCA7JqUPyc7XG4gIH1cbiAgXG4gIGlmIChtZXNzYWdlLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ+yLneuLqCcpIHx8IG1lc3NhZ2UudG9Mb3dlckNhc2UoKS5pbmNsdWRlcygn7JiB7JaRJykgfHwgbWVzc2FnZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCdudXRyaXRpb24nKSB8fCBtZXNzYWdlLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ2RpZXQnKSkge1xuICAgIHJldHVybiAn65+s64SI66W8IOychO2VnCDsmIHslpEg6rSA66as64qUIOykkeyalO2VqeuLiOuLpC4g7YOE7IiY7ZmU66y8KOyghOyytCDsubzroZzrpqzsnZggNTAtNjAlKSwg64uo67Cx7KeIKDE1LTIwJSksIOqxtOqwle2VnCDsp4DrsKkoMjAtMzAlKeydmCDqt6DtmJUg7J6h7Z6MIOyLneuLqOydtCDsoovsirXri4jri6QuIOyepeqxsOumrCDri6zrpqzquLAg7KCE7JeQ64qUIO2DhOyImO2ZlOusvCDruYTspJHsnYQg64aS7J206rOgLCDri6zrpqzquLAgMzAtNjDrtoQg7KCE7JeQIOqwgOuzjeqyjCDtg4TsiJjtmZTrrLwg7JyE7KO866GcIOyErey3qO2VmOyEuOyalC4g64us66as6riwIO2bhOyXkOuKlCAzMOu2hCDsnbTrgrTsl5Ag64uo67Cx7KeI6rO8IO2DhOyImO2ZlOusvOydhCDtlajqu5gg7ISt7Leo7ZWY64qUIOqyg+ydtCDtmozrs7Xsl5Ag64+E7JuA7J20IOuQqeuLiOuLpC4g7IiY67aEIOyErey3qOuPhCDrp6TsmrAg7KSR7JqU7ZWp64uI64ukLiDtirnrs4Ttnogg6raB6riI7ZWcIOu2gOu2hOydtCDsnojsnLzsi6DqsIDsmpQ/JztcbiAgfVxuICBcbiAgaWYgKG1lc3NhZ2UudG9Mb3dlckNhc2UoKS5pbmNsdWRlcygn7J6l67mEJykgfHwgbWVzc2FnZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCfsi6DrsJwnKSB8fCBtZXNzYWdlLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ3Nob2VzJykgfHwgbWVzc2FnZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCdnZWFyJykpIHtcbiAgICByZXR1cm4gJ+yii+ydgCDrn6zri50g7J6l67mE64qUIOqyve2XmOydhCDtgazqsowg7Zal7IOB7Iuc7YK164uI64ukLiDqsIDsnqUg7KSR7JqU7ZWcIOqyg+ydgCDsnpDsi6DsnZgg67CcIO2Yle2DnOyZgCDrn6zri50g7Iqk7YOA7J287JeQIOunnuuKlCDrn6zri53tmZTsnoXri4jri6QuIOyghOusuCDrn6zri50g66ek7J6l7JeQ7IScIOuwnCDrtoTshJ0oZ2FpdCBhbmFseXNpcynsnYQg67Cb7JWE67O064qUIOqyg+ydhCDstpTsspztlanri4jri6QuIOq4sOuKpeyEsSDsnZjrpZjripQg65WAIOuwsOy2nOydtCDsnpgg65CY64qUIOyGjOyerOqwgCDsoovsnLzrqbAsIOqzhOygiOyXkCDrp57ripQg66CI7J207Ja066eB7J20IOykkeyalO2VqeuLiOuLpC4g65iQ7ZWcIOyepeqxsOumrCDrn6zri50g7Iuc7JeQ64qUIOyImOu2hOqzvCDsmIHslpEg67O07Lap7J2EIOychO2VnCDrsqjtirjrgpgg7IiY67aEIO2MqeuPhCDqs6DroKTtlbTrs7TshLjsmpQuIOyWtOuWpCDsooXrpZjsnZgg7J6l67mE7JeQIOq0gOyLrOydtCDsnojsnLzsi6DqsIDsmpQ/JztcbiAgfVxuICBcbiAgLy8g7J2867CY7KCB7J24IOufrOuLnSDqtIDroKgg7KeI66y4XG4gIGlmIChtZXNzYWdlLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ+ufrOuLnScpIHx8IG1lc3NhZ2UudG9Mb3dlckNhc2UoKS5pbmNsdWRlcygn64us66as6riwJykgfHwgbWVzc2FnZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCdydW5uaW5nJykgfHwgbWVzc2FnZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCdqb2dnaW5nJykpIHtcbiAgICByZXR1cm4gJ+ufrOuLneydgCDsi6DssrTsoIEsIOygleyLoOyggSDqsbTqsJXsl5Ag66ek7JqwIOyii+ydgCDsmrTrj5nsnoXri4jri6QuIOyii+ydgCDrn6zri50g6rOE7ZqN7J2EIOyEuOyasOq4sCDsnITtlbTshJzripQg7ZiE7J6sIOyytOugpSDsiJjspIAsIOuqqe2RnCwg6rCA7JqpIOyLnOqwhOydhCDqs6DroKTtlbTslbwg7ZWp64uI64ukLiDstIjrs7TsnpDrnbzrqbQg7KO8IDPtmowsIOqwgSAyMC0zMOu2hOu2gO2EsCDsi5zsnpHtlZjsl6wg7KCQ7KeE7KCB7Jy866GcIOuKmOugpOqwgOuKlCDqsoPsnbQg7KKL7Iq164uI64ukLiDsoJXquLDsoIHsnbgg65+s64ud7J2AIOyLrO2PkCDquLDriqUg6rCV7ZmULCDsiqTtirjroIjsiqQg6rCQ7IaMLCDsiJjrqbQg6rCc7ISgIOuTseydmCDtmqjqs7zqsIAg7J6I7Iq164uI64ukLiDqtazssrTsoIHsnbgg66qp7ZGc64KYIOyniOusuOydtCDsnojsnLzsi5zrqbQg66eQ7JSA7ZW07KO87IS47JqULic7XG4gIH1cbiAgXG4gIGlmIChtZXNzYWdlLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ+qzhO2ajScpIHx8IG1lc3NhZ2UudG9Mb3dlckNhc2UoKS5pbmNsdWRlcygn7ZSM656cJykgfHwgbWVzc2FnZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCdwbGFuJykgfHwgbWVzc2FnZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCdzY2hlZHVsZScpKSB7XG4gICAgcmV0dXJuICftmqjqs7zsoIHsnbgg65+s64udIOqzhO2ajeydgCDrqqntkZwsIO2YhOyerCDssrTroKUg7IiY7KSALCDqt7jrpqzqs6Ag7IOd7ZmcIO2MqO2EtOydhCDqs6DroKTtlbTslbwg7ZWp64uI64ukLiDstIjrs7TsnpDripQg7KO8IDMtNO2ajCwg7KSR6riJ7J6Q64qUIDQtNe2ajCwg6rOg6riJ7J6Q64qUIDUtNu2ajCDtm4jroKjsnbQg7KCB7KCI7ZWp64uI64ukLiDtm4jroKjsnZgg7KKF66WY64+EIOuLpOyWke2ZlO2VmOuKlCDqsoPsnbQg7KKL7Iq164uI64ukOiDquLQg6rGw66asIOuLrOumrOq4sCjstJ0g6rGw66as7J2YIDMwLTQwJSksIO2ajOuztSDri6zrpqzquLAsIOyGjeuPhCDtm4jroKgo7J247YSw67KMLCDthZztj6wg65+wKeydhCDtj6ztlajsi5ztgqTshLjsmpQuIOuYkO2VnCDstZzshowgMS0y7J287J2YIO2ctOyLneydvOydhCDrsJjrk5zsi5wg7Y+s7ZWo7ZW07JW8IO2VqeuLiOuLpC4g7Ja065akIOyImOykgOydmCDrn6zri50g6rOE7ZqN7J20IO2VhOyalO2VmOyLoOqwgOyalD8nO1xuICB9XG4gIFxuICAvLyDquLDrs7gg7J2R64u1XG4gIHJldHVybiAn65+s64udIOqzhO2ajeyXkCDrjIDtlbQg64+E7JuA7J20IO2VhOyalO2VmOyLnOq1sOyalC4g7ZiE7J6sIOuLrOumrOq4sCDqsr3tl5gsIOuqqe2RnCDqsbDrpqwsIOuqqe2RnCDsi5zqsIQg65Ox7J2EIOyVjOugpOyjvOyLnOuptCDrjZQg6rWs7LK07KCB7J24IOqzhO2ajeydhCDshLjsm4zrk5zrprQg7IiYIOyeiOyKteuLiOuLpC4g7Y+J7IaMIOyatOuPmSDruYjrj4Trgpgg6rG06rCVIOyDge2DnOyXkCDrjIDtlbTshJzrj4Qg7JWM66Ck7KO87Iuc66m0IOuPhOybgOydtCDrkKnri4jri6QuIOyWtOuWpCDrtoDrtoTsl5Ag6rSA7Ius7J20IOyeiOycvOyLoOqwgOyalD8nO1xufTtcblxuLy8g66qo7J2YIO2UjOuenCDrjbDsnbTthLAg7IOd7ISxIO2VqOyImFxuZnVuY3Rpb24gY3JlYXRlTW9ja1BsYW5EYXRhKG1lc3NhZ2U6IHN0cmluZykge1xuICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpO1xuICBjb25zdCBmb3JtYXR0ZWREYXRlID0gYCR7bm93LmdldEZ1bGxZZWFyKCl964WEICR7bm93LmdldE1vbnRoKCkgKyAxfeyblCAke25vdy5nZXREYXRlKCl97J28ICgke2dldEtvcmVhbkRheU9mV2Vlayhub3cpfSkg7Jik7KCEIDc6MDBgO1xuICBcbiAgLy8gNWttIOufrOuLnSDtlIzrnpxcbiAgaWYgKG1lc3NhZ2UudG9Mb3dlckNhc2UoKS5pbmNsdWRlcygnNWsnKSB8fCBtZXNzYWdlLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJzVrbScpIHx8IFxuICAgICAgKG1lc3NhZ2UuaW5jbHVkZXMoJzUnKSAmJiBtZXNzYWdlLmluY2x1ZGVzKCdrbScpKSkge1xuICAgIHJldHVybiB7XG4gICAgICB0aXRsZTogJ+y0iOuztOyekOulvCDsnITtlZwgNUsg65+s64udIO2UjOuenCcsXG4gICAgICBkYXRlOiBmb3JtYXR0ZWREYXRlLFxuICAgICAgZGlzdGFuY2U6ICc1IGttJyxcbiAgICAgIGR1cmF0aW9uOiAn7JW9IDM167aEJyxcbiAgICAgIGludGVuc2l0eTogJ+qwgOuyvOybgCAtIOykkeqwhCcsXG4gICAgICBkZXRhaWxzOiAn7KSA67mE7Jq064+ZIDXrtoQg4oaSIDXrtoQg7KGw6rmFLzHrtoQg6rG36riwIOuwmOuztSjstJ0gMjXrtoQpIOKGkiDsoJXrpqzsmrTrj5kgNeu2hCdcbiAgICB9O1xuICB9XG4gIFxuICAvLyAxMGttIOufrOuLnSDtlIzrnpxcbiAgaWYgKG1lc3NhZ2UudG9Mb3dlckNhc2UoKS5pbmNsdWRlcygnMTBrJykgfHwgbWVzc2FnZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCcxMGttJykgfHwgXG4gICAgICAobWVzc2FnZS5pbmNsdWRlcygnMTAnKSAmJiBtZXNzYWdlLmluY2x1ZGVzKCdrbScpKSkge1xuICAgIHJldHVybiB7XG4gICAgICB0aXRsZTogJ+ykkeq4ieyekOulvCDsnITtlZwgMTBLIOufrOuLnSDtlIzrnpwnLFxuICAgICAgZGF0ZTogZm9ybWF0dGVkRGF0ZSxcbiAgICAgIGRpc3RhbmNlOiAnMTAga20nLFxuICAgICAgZHVyYXRpb246ICfslb0gMeyLnOqwhCcsXG4gICAgICBpbnRlbnNpdHk6ICfspJHqsIQnLFxuICAgICAgZGV0YWlsczogJ+ykgOu5hOyatOuPmSAxMOu2hCDihpIgNTozMC02OjAwL2ttIO2OmOydtOyKpOuhnCAxMGttIOuLrOumrOq4sCDihpIg7KCV66as7Jq064+ZIDXrtoQnXG4gICAgfTtcbiAgfVxuICBcbiAgLy8g6riw67O4IOyjvOunkCDrn6zri50g7ZSM656cXG4gIHJldHVybiB7XG4gICAgdGl0bGU6ICfso7zrp5Ag65+s64udIO2UjOuenCcsXG4gICAgZGF0ZTogZm9ybWF0dGVkRGF0ZSxcbiAgICBkaXN0YW5jZTogJzcga20nLFxuICAgIGR1cmF0aW9uOiAn7JW9IDQ167aEJyxcbiAgICBpbnRlbnNpdHk6ICfspJHqsIQnLFxuICAgIGRldGFpbHM6ICfspIDruYTsmrTrj5kgOOu2hCDihpIgNjowMC9rbSDtjpjsnbTsiqTroZwg7Y647JWI7ZWY6rKMIDdrbSDri6zrpqzquLAg4oaSIOygleumrOyatOuPmSA367aEJ1xuICB9O1xufVxuXG4vLyDtlZzqta3slrQg7JqU7J28IOuzgO2ZmCDtlajsiJhcbmZ1bmN0aW9uIGdldEtvcmVhbkRheU9mV2VlayhkYXRlOiBEYXRlKTogc3RyaW5nIHtcbiAgY29uc3QgZGF5cyA9IFsn7J28JywgJ+yblCcsICftmZQnLCAn7IiYJywgJ+uqqScsICfquIgnLCAn7YagJ107XG4gIHJldHVybiBkYXlzW2RhdGUuZ2V0RGF5KCldO1xufSAiXSwibmFtZXMiOlsiZ2VuZXJhdGVSdW5uaW5nUGxhbiIsImNvbnZlcnNhdGlvbkhpc3RvcmllcyIsImhhbmRsZXIiLCJyZXEiLCJyZXMiLCJtZXRob2QiLCJzdGF0dXMiLCJlbmQiLCJtZXNzYWdlIiwic2Vzc2lvbklkIiwiYm9keSIsImFwaUtleSIsInByb2Nlc3MiLCJlbnYiLCJHRU1JTklfQVBJX0tFWSIsIk5FWFRfUFVCTElDX0dFTUlOSV9BUElfS0VZIiwianNvbiIsInRleHQiLCJpZCIsIkRhdGUiLCJub3ciLCJ0b1N0cmluZyIsInNpZCIsImxlbmd0aCIsImZpcnN0TWVzc2FnZSIsInNsaWNlIiwicHVzaCIsInJvbGUiLCJjb25zb2xlIiwibG9nIiwic3Vic3RyaW5nIiwicmVzcG9uc2UiLCJwbGFuRGF0YSIsImFwaUVycm9yIiwiZXJyb3IiLCJFcnJvciIsInN0YWNrIiwibW9ja1Jlc3BvbnNlIiwibW9ja0NoYXRSZXNwb25zZSIsIm1vY2tQbGFuRGF0YSIsImNyZWF0ZU1vY2tQbGFuRGF0YSIsInRvTG93ZXJDYXNlIiwiaW5jbHVkZXMiLCJmb3JtYXR0ZWREYXRlIiwiZ2V0RnVsbFllYXIiLCJnZXRNb250aCIsImdldERhdGUiLCJnZXRLb3JlYW5EYXlPZldlZWsiLCJ0aXRsZSIsImRhdGUiLCJkaXN0YW5jZSIsImR1cmF0aW9uIiwiaW50ZW5zaXR5IiwiZGV0YWlscyIsImRheXMiLCJnZXREYXkiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./src/pages/api/chat.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fchat&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fapi%2Fchat.ts&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();